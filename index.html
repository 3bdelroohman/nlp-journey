<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Ø±Ø­Ù„Ø© NLP Ø§Ù„Ø¹Ø±Ø¨ÙŠ</title>
<meta name="theme-color" content="#FF8C00">
<meta name="apple-mobile-web-app-capable" content="yes">
<style>
:root{--bg:#FAFAFA;--bgc:#FFF;--text:#2D3436;--text2:#636E72;--pri:#FF8C00;--pril:#FFB347;--grn:#4CAF50;--pur:#7C4DFF;--blu:#2196F3;--pnk:#FF6B9D;--red:#FF5252;--teal:#26C6DA;--gbg:#E8F5E9;--pbg:#EDE7F6;--obg:#FFF3E0;--bbg:#E3F2FD;--sh:0 4px 15px rgba(0,0,0,.07);--r:20px;--nh:66px}
.dark{--bg:#1A1A2E;--bgc:#16213E;--text:#EAEAEA;--text2:#aaa;--sh:0 4px 15px rgba(0,0,0,.3);--gbg:#1b3a1b;--pbg:#2a1f3e;--obg:#3a2a10;--bbg:#102a3e}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'Segoe UI',Tahoma,sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;padding-bottom:var(--nh);transition:all .3s}
::-webkit-scrollbar{display:none}
.page{display:none;animation:fadeIn .35s ease}.page.act{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
@keyframes floatSlow{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-6px) rotate(5deg)}}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes blob{0%,100%{border-radius:42% 58% 70% 30%/45% 45% 55% 55%}25%{border-radius:55% 45% 40% 60%/65% 35% 65% 35%}50%{border-radius:30% 70% 55% 45%/55% 45% 55% 45%}75%{border-radius:65% 35% 45% 55%/40% 60% 40% 60%}}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:none}}
@keyframes confetti{0%{transform:translateY(0) rotate(0);opacity:1}100%{transform:translateY(-100px) rotate(720deg);opacity:0}}

/* ONBOARDING */
.onboard{position:fixed;inset:0;z-index:500;display:flex;flex-direction:column}
.onboard.hide{display:none}
.ob-slide{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;position:relative;overflow:hidden;display:none}
.ob-slide.act{display:flex}
.ob-blob1{position:absolute;width:200px;height:200px;background:rgba(255,255,255,.15);animation:blob 8s infinite;top:10%;right:-30px}
.ob-blob2{position:absolute;width:150px;height:150px;background:rgba(255,255,255,.1);animation:blob 10s infinite reverse;bottom:15%;left:-20px}
.ob-dots{position:absolute;bottom:30%;display:flex;gap:8px}
.ob-dots span{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.4);transition:.3s}
.ob-dots span.act{background:#fff;width:24px;border-radius:4px}
.ob-char{font-size:120px;margin-bottom:20px;animation:float 3s ease-in-out infinite;filter:drop-shadow(0 10px 20px rgba(0,0,0,.1))}
.ob-title{font-size:28px;font-weight:700;color:#fff;text-align:center;margin-bottom:10px}
.ob-desc{font-size:15px;color:rgba(255,255,255,.85);text-align:center;line-height:1.6;max-width:300px}
.ob-next{position:absolute;bottom:12%;width:60px;height:60px;border-radius:50%;background:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:0 4px 20px rgba(0,0,0,.15);transition:.3s;display:flex;align-items:center;justify-content:center}
.ob-next:active{transform:scale(.9)}
.ob-skip{position:absolute;top:50px;left:30px;background:none;border:none;color:rgba(255,255,255,.7);font-size:14px;cursor:pointer;font-family:inherit}
[dir="ltr"] .ob-skip{left:auto;right:30px}

/* HEADER */
.hdr{background:linear-gradient(135deg,#FF8C00,#FFB347,#FF6B00);color:#fff;padding:35px 20px 60px;position:relative;overflow:hidden}
.hdr::after{content:'';position:absolute;bottom:-1px;left:0;right:0;height:28px;background:var(--bg);border-radius:28px 28px 0 0}
.hdr-blob{position:absolute;width:120px;height:120px;background:rgba(255,255,255,.08);animation:blob 12s infinite;top:-20px;left:-20px}
.hdr-blob2{position:absolute;width:80px;height:80px;background:rgba(255,255,255,.06);animation:blob 15s infinite reverse;top:30px;right:10px}
.hdr-stars{position:absolute;font-size:14px;animation:floatSlow 4s ease-in-out infinite;opacity:.4}
.hdr-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative;z-index:1}
.hdr-acts{display:flex;gap:8px}
.hdr-btn{background:rgba(255,255,255,.2);border:none;color:#fff;width:36px;height:36px;border-radius:50%;font-size:15px;cursor:pointer;transition:.3s;backdrop-filter:blur(8px)}
.hdr-btn:active{transform:scale(.9)}
.hdr h2{font-size:24px;font-weight:700;position:relative;z-index:1}
.hdr .motiv{font-size:13px;opacity:.9;margin-top:6px;line-height:1.5;position:relative;z-index:1}
.hdr-char{position:absolute;bottom:35px;left:20px;font-size:55px;animation:float 4s ease-in-out infinite;z-index:1;filter:drop-shadow(0 5px 10px rgba(0,0,0,.1))}
[dir="ltr"] .hdr-char{left:auto;right:20px}
.cd-main{background:rgba(255,255,255,.2);border-radius:14px;padding:8px 16px;display:inline-flex;align-items:center;gap:6px;font-size:13px;margin-top:10px;backdrop-filter:blur(8px);position:relative;z-index:1}

/* CARDS */
.c{background:var(--bgc);border-radius:var(--r);padding:16px;box-shadow:var(--sh);transition:transform .2s;cursor:pointer;margin-bottom:12px}
.c:active{transform:scale(.97)}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:0 16px;margin-bottom:16px}
.gs{display:flex;gap:12px;padding:0 16px;overflow-x:auto;margin-bottom:16px;scroll-snap-type:x mandatory}
.gs::-webkit-scrollbar{display:none}
.gs>.cdc{scroll-snap-align:start;min-width:140px;flex-shrink:0}
.st{font-size:17px;font-weight:700;padding:14px 20px 8px}
.sts{font-size:12px;color:var(--text2);padding:0 20px 10px}

/* PATH CARD HOME */
.pc{padding:16px;overflow:hidden;position:relative}
.pc .pi{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;margin-bottom:10px;position:relative}
.pc .pi .mini-char{position:absolute;font-size:10px;bottom:-2px;right:-2px;animation:floatSlow 3s infinite}
.pc .pn{font-size:14px;font-weight:700;margin-bottom:3px}
.pc .pf2{font-size:11px;color:var(--text2);margin-bottom:5px}
.pc .pest{font-size:10px;color:var(--teal);margin-top:6px;display:flex;align-items:center;gap:3px}
.pb{height:7px;background:rgba(0,0,0,.06);border-radius:4px;overflow:hidden}.dark .pb{background:rgba(255,255,255,.08)}
.pfl{height:100%;border-radius:4px;transition:width .8s}

/* COUNTDOWN */
.cdc{border-radius:var(--r);padding:14px;color:#fff;text-align:center;cursor:pointer;transition:transform .2s;position:relative;overflow:hidden}
.cdc:active{transform:scale(.96)}
.cdc .ci{font-size:22px;margin-bottom:4px}
.cdc .cv{font-size:26px;font-weight:700}
.cdc .cl{font-size:10px;opacity:.9;margin-top:3px}
.cdc-blob{position:absolute;width:50px;height:50px;background:rgba(255,255,255,.1);animation:blob 8s infinite;top:-10px;right:-10px}

/* UPCOMING */
.ui{display:flex;align-items:center;gap:12px;padding:12px 16px;margin:0 16px 8px;background:var(--bgc);border-radius:16px;box-shadow:var(--sh)}
.ud{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.ut{font-size:13px;font-weight:600}
.udt{font-size:11px;color:var(--text2)}

/* NAV */
#nav{position:fixed;bottom:0;left:0;right:0;height:var(--nh);background:var(--bgc);box-shadow:0 -2px 15px rgba(0,0,0,.06);display:flex;align-items:center;justify-content:space-around;z-index:100;border-radius:18px 18px 0 0}
.ni{display:flex;flex-direction:column;align-items:center;gap:2px;cursor:pointer;padding:8px 12px;border:none;background:none;color:var(--text2);font-size:10px;font-family:inherit;transition:.3s}
.ni.act{color:var(--pri)}
.ni .ico{font-size:20px;transition:.3s}.ni.act .ico{transform:translateY(-2px) scale(1.1)}

/* TABS */
.tb{display:flex;gap:8px;padding:10px 16px;overflow-x:auto}.tb::-webkit-scrollbar{display:none}
.t{padding:7px 15px;border-radius:18px;font-size:12px;font-weight:600;border:none;cursor:pointer;white-space:nowrap;transition:.3s;background:var(--bg);color:var(--text2);font-family:inherit}
.dark .t{background:var(--bgc)}.t.act{background:var(--pri);color:#fff}

/* BRANCH */
.bc{display:flex;align-items:center;gap:12px;padding:13px 16px;margin:0 16px 8px;background:var(--bgc);border-radius:var(--r);box-shadow:var(--sh);cursor:pointer;transition:transform .2s}
.bc:active{transform:scale(.97)}
.bic{width:42px;height:42px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.bi{flex:1;min-width:0}.bn{font-size:13px;font-weight:700;margin-bottom:2px}
.bm{font-size:11px;color:var(--text2);margin-bottom:5px}
.best{font-size:10px;color:var(--teal);margin-top:4px}

/* DETAIL */
.dh{padding:14px 20px;display:flex;align-items:center;gap:12px}
.bbk{width:38px;height:38px;border-radius:11px;border:none;background:var(--bgc);box-shadow:var(--sh);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--text);transition:.3s}
.bbk:active{transform:scale(.9)}
.dta{flex:1}.dt{font-size:17px;font-weight:700}.ds{font-size:11px;color:var(--text2);margin-top:2px}
.dpw{margin:0 16px 14px;background:var(--bgc);border-radius:14px;padding:12px 16px;box-shadow:var(--sh)}
.dsec{margin:0 16px 14px;background:var(--bgc);border-radius:var(--r);box-shadow:var(--sh);overflow:hidden}
.dsh{padding:12px 16px;font-size:14px;font-weight:700;border-bottom:1px solid rgba(0,0,0,.04);display:flex;justify-content:space-between;align-items:center}
.dark .dsh{border-color:rgba(255,255,255,.04)}
.dsh-add{background:none;border:none;font-size:18px;cursor:pointer;color:var(--pri);padding:2px 6px}

/* CHECK ITEM */
.chi{display:flex;align-items:flex-start;gap:10px;padding:11px 16px;border-bottom:1px solid rgba(0,0,0,.03);position:relative}
.dark .chi{border-color:rgba(255,255,255,.03)}.chi:last-child{border:none}
.cc{width:25px;height:25px;border-radius:50%;border:2.5px solid var(--text2);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.3s;flex-shrink:0;margin-top:2px;font-size:12px;color:transparent}
.cc.chk{border-color:var(--grn);background:var(--grn);color:#fff}
.ccnt{flex:1;min-width:0}
.cnm{font-size:13px;font-weight:600;margin-bottom:2px;line-height:1.4}
.cnm.dn{text-decoration:line-through;opacity:.45}
.ctp{display:inline-block;font-size:10px;padding:2px 7px;border-radius:7px;background:rgba(0,0,0,.04);color:var(--text2);margin-bottom:3px;margin-right:4px}
.dark .ctp{background:rgba(255,255,255,.06)}
.cpr{display:flex;align-items:center;gap:6px;margin-top:3px}
.cpr .pb{flex:1;height:5px}.cpt{font-size:10px;color:var(--text2);white-space:nowrap}
.ca{display:flex;gap:5px;margin-top:5px;flex-wrap:wrap}
.cb{padding:3px 9px;border-radius:7px;border:none;font-size:10px;cursor:pointer;transition:.3s;font-family:inherit;font-weight:600}
.cb:active{transform:scale(.95)}
.cb.p{background:var(--bbg);color:var(--blu)}.dark .cb.p{background:rgba(33,150,243,.12)}
.cb.e{background:var(--pbg);color:var(--pur)}.dark .cb.e{background:rgba(124,77,255,.12)}
.cb.d{background:rgba(255,82,82,.08);color:var(--red)}
.ed{font-size:10px;color:var(--teal);margin-top:3px}

/* SUBTASKS */
.subtasks{margin-top:6px;padding-right:12px;border-right:2px solid rgba(0,0,0,.06)}
[dir="ltr"] .subtasks{padding-right:0;border-right:none;padding-left:12px;border-left:2px solid rgba(0,0,0,.06)}
.dark .subtasks{border-color:rgba(255,255,255,.06)}
.sub-item{display:flex;align-items:center;gap:8px;padding:5px 0}
.sub-cc{width:18px;height:18px;border-radius:50%;border:2px solid var(--text2);cursor:pointer;transition:.3s;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:9px;color:transparent}
.sub-cc.chk{border-color:var(--grn);background:var(--grn);color:#fff}
.sub-nm{font-size:12px;flex:1}.sub-nm.dn{text-decoration:line-through;opacity:.4}
.sub-del{background:none;border:none;font-size:12px;color:var(--red);cursor:pointer;padding:2px}
.add-sub{background:none;border:none;font-size:11px;color:var(--pri);cursor:pointer;padding:4px 0;font-family:inherit;font-weight:600}

/* TIMELINE PAGE */
.tl-page{padding:16px 20px}
.tl-filter{margin-bottom:16px}
.tl{position:relative}
.tll{position:absolute;top:0;bottom:0;width:3px;background:rgba(0,0,0,.06);border-radius:2px}
[dir="rtl"] .tll{right:22px}[dir="ltr"] .tll{left:22px}
.dark .tll{background:rgba(255,255,255,.06)}
.tli{display:flex;gap:16px;margin-bottom:24px;position:relative}
.tld{width:14px;height:14px;border-radius:50%;flex-shrink:0;z-index:1;margin-top:3px;border:3px solid}
.tld.ps{background:var(--grn);border-color:var(--grn)}
.tld.cr{background:var(--pri);border-color:var(--pri);box-shadow:0 0 0 6px rgba(255,140,0,.2);animation:pulse 2s infinite}
.tld.fu{background:var(--bgc);border-color:var(--text2)}
.tlc{flex:1;background:var(--bgc);border-radius:14px;padding:14px;box-shadow:var(--sh)}
.tldt{font-size:10px;color:var(--text2);margin-bottom:2px}
.tltt{font-size:14px;font-weight:700}
.tldsc{font-size:11px;color:var(--text2);margin-top:4px;line-height:1.4}
.tlb{display:inline-block;font-size:9px;padding:2px 8px;border-radius:7px;background:var(--pri);color:#fff;margin-top:6px}
.tl-cd{font-size:11px;color:var(--teal);margin-top:4px}

/* STATS */
.skc{background:linear-gradient(135deg,#FF8C00,#FF6B00);color:#fff;border-radius:var(--r);padding:22px;margin:14px 16px;text-align:center;position:relative;overflow:hidden}
.skc .sk-blob{position:absolute;width:80px;height:80px;background:rgba(255,255,255,.08);animation:blob 10s infinite;top:-15px;right:-15px}
.skn{font-size:48px;font-weight:700}.skl{font-size:13px;opacity:.9}.ski{font-size:36px;margin-bottom:6px}
.pli{display:flex;align-items:center;gap:10px;padding:11px 16px;margin:0 16px 7px;background:var(--bgc);border-radius:14px;box-shadow:var(--sh)}
.plii{width:34px;height:34px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0}
.plin{flex:1;min-width:0}.plinm{font-size:12px;font-weight:600;margin-bottom:3px}
.plip{font-size:12px;font-weight:700;flex-shrink:0}
.cpg{position:relative;width:60px;height:60px;margin:0 auto 6px}
.cpg svg{transform:rotate(-90deg);width:60px;height:60px}
.cpg .bg{fill:none;stroke:rgba(0,0,0,.06);stroke-width:6}.dark .cpg .bg{stroke:rgba(255,255,255,.08)}
.cpg .fg{fill:none;stroke-width:6;stroke-linecap:round;transition:stroke-dashoffset .8s}
.cpg .pct{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700}

/* GPA */
.gps{padding:14px 16px}
.gpr{background:linear-gradient(135deg,var(--pur),#9C27B0);color:#fff;border-radius:var(--r);padding:22px;margin-bottom:14px;text-align:center;position:relative;overflow:hidden}
.gpr .gp-blob{position:absolute;width:70px;height:70px;background:rgba(255,255,255,.08);animation:blob 9s infinite;bottom:-10px;left:-10px}
.gpv{font-size:34px;font-weight:700}.gpg{font-size:15px;margin-top:3px;opacity:.9}
.gprw{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:14px}
.gpb{background:var(--bgc);border-radius:14px;padding:12px;text-align:center;box-shadow:var(--sh)}
.gpbv{font-size:17px;font-weight:700;color:var(--pri)}
.gpbl{font-size:9px;color:var(--text2);margin-top:3px}
.smc{background:var(--bgc);border-radius:var(--r);padding:14px;box-shadow:var(--sh);margin-bottom:10px}
.smc h4{font-size:14px;font-weight:700;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center}
.sr{display:flex;align-items:center;gap:6px;margin-bottom:7px}
.sr input{flex:1;padding:9px 10px;border:1.5px solid rgba(0,0,0,.06);border-radius:9px;font-size:12px;font-family:inherit;background:var(--bg);color:var(--text)}
.dark .sr input{border-color:rgba(255,255,255,.06)}
.sr select{padding:9px 6px;border:1.5px solid rgba(0,0,0,.06);border-radius:9px;font-size:11px;background:var(--bg);color:var(--text);font-family:inherit;min-width:85px}
.dark .sr select{border-color:rgba(255,255,255,.06)}
.sr .dls{background:none;border:none;color:var(--red);font-size:16px;cursor:pointer;padding:3px}
.asb{background:var(--bbg);color:var(--blu);border:none;padding:7px 12px;border-radius:9px;font-size:12px;cursor:pointer;font-family:inherit;font-weight:600}
.dark .asb{background:rgba(33,150,243,.12)}
.cgb{width:100%;padding:13px;border:none;border-radius:12px;font-size:14px;font-weight:700;background:linear-gradient(135deg,var(--pur),#9C27B0);color:#fff;cursor:pointer;margin-top:10px;font-family:inherit;transition:.3s}
.cgb:active{transform:scale(.97)}
.asmb{width:100%;padding:10px;border:2px dashed rgba(0,0,0,.08);border-radius:12px;font-size:13px;cursor:pointer;background:none;color:var(--text2);font-family:inherit;margin-bottom:10px}
.dark .asmb{border-color:rgba(255,255,255,.08)}
.gadv{padding:12px;background:var(--obg);border-radius:12px;font-size:12px;line-height:1.6;margin-top:10px;color:var(--text)}
.dark .gadv{background:rgba(255,140,0,.1)}

/* SETTINGS */
.sti{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:var(--bgc);margin:0 16px 7px;border-radius:14px;box-shadow:var(--sh);cursor:pointer;transition:transform .2s}
.sti:active{transform:scale(.98)}
.sil{display:flex;align-items:center;gap:10px}.sii{font-size:20px}.sit{font-size:13px;font-weight:600}
.tg{width:46px;height:26px;border-radius:13px;background:rgba(0,0,0,.1);position:relative;cursor:pointer;transition:.3s;border:none;flex-shrink:0}
.dark .tg{background:rgba(255,255,255,.1)}.tg.on{background:var(--pri)}
.tgk{width:20px;height:20px;border-radius:50%;background:#fff;position:absolute;top:3px;transition:.3s;box-shadow:0 1px 3px rgba(0,0,0,.15)}
[dir="rtl"] .tgk{right:3px}[dir="rtl"] .tg.on .tgk{right:23px}
[dir="ltr"] .tgk{left:3px}[dir="ltr"] .tg.on .tgk{left:23px}

/* MODAL */
.mbd{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:200;display:none;opacity:0;transition:opacity .3s}
.mbd.sh{display:block;opacity:1}
.mdl{position:fixed;bottom:0;left:0;right:0;background:var(--bgc);border-radius:22px 22px 0 0;z-index:201;transform:translateY(100%);transition:transform .3s;max-height:85vh;overflow-y:auto;padding:18px}
.mdl.sh{transform:none}
.mh{width:36px;height:4px;background:rgba(0,0,0,.1);border-radius:2px;margin:0 auto 14px}.dark .mh{background:rgba(255,255,255,.1)}
.mdl h3{font-size:17px;font-weight:700;margin-bottom:14px}
.mi,.mdl select,.mdl textarea{width:100%;padding:11px 14px;border:2px solid rgba(0,0,0,.06);border-radius:12px;font-size:13px;font-family:inherit;background:var(--bg);color:var(--text);margin-bottom:10px;transition:.3s;-webkit-appearance:none}
.dark .mi,.dark .mdl select,.dark .mdl textarea{border-color:rgba(255,255,255,.06)}
.mi:focus,.mdl select:focus,.mdl textarea:focus{outline:none;border-color:var(--pri)}
.mdl textarea{resize:vertical;min-height:60px}
.mb{width:100%;padding:13px;border:none;border-radius:12px;font-size:14px;font-weight:700;cursor:pointer;transition:.3s;font-family:inherit;margin-bottom:7px}
.mb.pr{background:linear-gradient(135deg,var(--pri),#FF6B00);color:#fff}
.mb.dg{background:var(--red);color:#fff}
.mb.sc{background:var(--bg);color:var(--text)}
.mb:active{transform:scale(.97)}
.m-row{display:flex;gap:8px;margin-bottom:10px}
.m-row>*{flex:1}

/* TOAST */
#toast{position:fixed;top:16px;left:50%;transform:translateX(-50%) translateY(-80px);background:var(--bgc);color:var(--text);padding:10px 20px;border-radius:12px;box-shadow:0 6px 25px rgba(0,0,0,.15);z-index:300;font-size:13px;font-weight:600;transition:transform .4s;white-space:nowrap;max-width:90vw}
#toast.sh{transform:translateX(-50%) translateY(0)}

.emp{text-align:center;padding:35px 20px;color:var(--text2)}.emp .ei{font-size:50px;margin-bottom:10px;animation:float 3s ease-in-out infinite}.emp .et{font-size:13px;line-height:1.5}
.sbh{background:var(--bgc);padding:14px 20px;box-shadow:var(--sh);display:flex;align-items:center;gap:10px;position:sticky;top:0;z-index:10}
.sbt{font-size:17px;font-weight:700}
.abc{margin:16px;padding:18px;background:var(--bgc);border-radius:var(--r);box-shadow:var(--sh);text-align:center}
.abc .ai{font-size:42px;margin-bottom:10px;animation:float 3s ease-in-out infinite}.abc h3{font-size:17px;font-weight:700;margin-bottom:6px}
.abc p{font-size:12px;color:var(--text2);line-height:1.5}
.nir{display:flex;align-items:center;gap:8px;justify-content:center;margin-bottom:14px}
.nir input[type="number"]{width:75px;text-align:center;padding:8px;border:2px solid rgba(0,0,0,.06);border-radius:10px;font-size:14px;font-family:inherit;background:var(--bg);color:var(--text)}
.dark .nir input[type="number"]{border-color:rgba(255,255,255,.06)}
.nir span{font-size:12px;color:var(--text2)}

@media(min-width:500px){body{max-width:480px;margin:0 auto}#nav{max-width:480px;left:50%;transform:translateX(-50%)}}
</style>
</head>
<body>
<div id="toast"></div>

<!-- ONBOARDING -->
<div class="onboard" id="onboard">
  <div class="ob-slide act" id="ob0" style="background:linear-gradient(135deg,#FFB347,#FF8C00)">
    <div class="ob-blob1"></div><div class="ob-blob2"></div>
    <button class="ob-skip" onclick="skipOB()">ØªØ®Ø·ÙŠ</button>
    <div class="ob-char">ğŸš€</div>
    <div class="ob-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!</div>
    <div class="ob-desc">Ø±Ø­Ù„ØªÙƒ Ù„ØªØµØ¨Ø­ Ù…Ù‡Ù†Ø¯Ø³ Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ© Ø­Ø§Ø³ÙˆØ¨ÙŠ ØªØ¨Ø¯Ø£ Ù…Ù† Ù‡Ù†Ø§</div>
    <div class="ob-dots"><span class="act"></span><span></span><span></span></div>
    <button class="ob-next" onclick="nextOB(1)">â†</button>
  </div>
  <div class="ob-slide" id="ob1" style="background:linear-gradient(135deg,#7C4DFF,#B388FF)">
    <div class="ob-blob1"></div><div class="ob-blob2"></div>
    <button class="ob-skip" onclick="skipOB()">ØªØ®Ø·ÙŠ</button>
    <div class="ob-char">ğŸ“š</div>
    <div class="ob-title">ØªØ¹Ù„Ù‘Ù… Ø¨Ø°ÙƒØ§Ø¡</div>
    <div class="ob-desc">ØªØ§Ø¨Ø¹ ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
    <div class="ob-dots"><span></span><span class="act"></span><span></span></div>
    <button class="ob-next" onclick="nextOB(2)">â†</button>
  </div>
  <div class="ob-slide" id="ob2" style="background:linear-gradient(135deg,#FF6B9D,#FF8A80)">
    <div class="ob-blob1"></div><div class="ob-blob2"></div>
    <div class="ob-char">ğŸ¯</div>
    <div class="ob-title">Ø­Ù‚Ù‚ Ø­Ù„Ù…Ùƒ</div>
    <div class="ob-desc">Ù…Ù†Ø­Ø© Ù…Ø§Ø¬Ø³ØªÙŠØ± ÙÙŠ Ø§Ù„Ù„Ø³Ø§Ù†ÙŠØ§Øª Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ÙŠØ© Ø¨Ø§Ù†ØªØ¸Ø§Ø±Ùƒ!</div>
    <div class="ob-dots"><span></span><span></span><span class="act"></span></div>
    <button class="ob-next" onclick="skipOB()">ğŸš€</button>
  </div>
</div>

<!-- HOME -->
<div id="pg-home" class="page act">
  <div class="hdr">
    <div class="hdr-blob"></div><div class="hdr-blob2"></div>
    <span class="hdr-stars" style="top:15px;right:60px">âœ¦</span>
    <span class="hdr-stars" style="top:50px;right:30%;animation-delay:.5s">âœ§</span>
    <span class="hdr-stars" style="top:25px;left:40%;animation-delay:1s">âŸ¡</span>
    <div class="hdr-top">
      <div><h2 id="greet"></h2></div>
      <div class="hdr-acts">
        <button class="hdr-btn" onclick="toggleLang()" id="lbtn">EN</button>
        <button class="hdr-btn" onclick="toggleDark()" id="dbtn">ğŸŒ™</button>
      </div>
    </div>
    <p class="motiv" id="motiv"></p>
    <div class="cd-main" id="gcd"></div>
    <div class="hdr-char" id="hdr-char">ğŸ‘¨â€ğŸ’»</div>
  </div>
  <div style="height:8px"></div>
  <div class="st" id="h-pt-t"></div>
  <div class="g2" id="h-paths"></div>
  <div class="st" id="h-cd-t"></div>
  <div class="gs" id="h-cds"></div>
  <div class="st" id="h-up-t"></div>
  <div id="h-up"></div>
  <div style="height:16px"></div>
</div>

<!-- PATHS -->
<div id="pg-paths" class="page">
  <div class="sbh"><span class="sbt" id="paths-t"></span></div>
  <div class="tb" id="p-tabs"></div>
  <div id="p-list"></div>
  <div style="height:16px"></div>
</div>

<!-- DETAIL -->
<div id="pg-detail" class="page">
  <div class="dh">
    <button class="bbk" onclick="goBack()" id="bkb">â†’</button>
    <div class="dta"><div class="dt" id="d-title"></div><div class="ds" id="d-sub"></div></div>
  </div>
  <div class="dpw" id="d-prog"></div>
  <div id="d-secs"></div>
  <div style="height:16px"></div>
</div>

<!-- TIMELINE -->
<div id="pg-timeline" class="page">
  <div class="sbh"><span class="sbt" id="tl-t"></span></div>
  <div class="tl-page" id="tl-content"></div>
  <div style="height:16px"></div>
</div>

<!-- STATS -->
<div id="pg-stats" class="page">
  <div class="sbh"><span class="sbt" id="stats-t"></span></div>
  <div class="tb" id="s-tabs"></div>
  <div id="s-cnt"></div>
  <div style="height:16px"></div>
</div>

<!-- SETTINGS -->
<div id="pg-settings" class="page">
  <div class="sbh"><span class="sbt" id="set-t"></span></div>
  <div style="height:10px"></div>
  <div id="set-list"></div>
  <div class="abc">
    <div class="ai">ğŸ§‘â€ğŸ”¬</div>
    <h3>Arabic NLP Journey</h3>
    <p id="abt"></p>
    <p style="margin-top:6px;font-size:10px;color:var(--text2)">v2.0</p>
  </div>
</div>

<!-- NAV -->
<nav id="nav">
  <button class="ni act" data-p="home"><span class="ico">ğŸ </span><span data-t="nH">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></button>
  <button class="ni" data-p="paths"><span class="ico">ğŸ“‹</span><span data-t="nP">Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª</span></button>
  <button class="ni" data-p="timeline"><span class="ico">ğŸ“…</span><span data-t="nTL">Ø§Ù„ØªØ§ÙŠÙ… Ù„Ø§ÙŠÙ†</span></button>
  <button class="ni" data-p="stats"><span class="ico">ğŸ“Š</span><span data-t="nS">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</span></button>
  <button class="ni" data-p="settings"><span class="ico">âš™ï¸</span><span data-t="nSt">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span></button>
</nav>

<div class="mbd" id="mbd" onclick="closeMdl()"></div>
<div class="mdl" id="mdl"></div>

<script>
// ======================== STATE ========================
var S={lang:'ar',dark:false,cp:'home',pp:null,pf:'all',stab:'ov',ck:{},ip:{},tasks:[],streak:{c:0,ld:null},
gpa:{sems:[{id:1,subs:[{n:'',g:'excellent'}]}]},gpaR:null,detBr:null,cdMode:{},onboarded:false,
subtasks:{},editedItems:{}};

function ld(){try{var s=localStorage.getItem('nlpjs2');if(s){var p=JSON.parse(s);for(var k in p)S[k]=p[k]}}catch(e){}}
function sv(){try{localStorage.setItem('nlpjs2',JSON.stringify(S))}catch(e){}}

// ======================== MOTIVATIONAL MESSAGES ========================
var MOTIVATIONS={
ar:[
"ÙƒÙ„ ÙŠÙˆÙ… ØªØªØ¹Ù„Ù… ÙÙŠÙ‡ Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯ØŒ ØªÙ‚ØªØ±Ø¨ Ø£ÙƒØ«Ø± Ù…Ù† Ø­Ù„Ù…Ùƒ ğŸŒŸ",
"Ø§Ù„Ø¹Ù„Ù… ÙŠÙØ¤ØªÙ‰ ÙˆÙ„Ø§ ÙŠØ£ØªÙŠ.. ÙØ§Ø³Ø¹Ù Ø¥Ù„ÙŠÙ‡ ğŸ“š",
"Ø£Ù†Øª Ù„Ø§ ØªØ¨Ù†ÙŠ Ù…Ø³ÙŠØ±Ø© Ù…Ù‡Ù†ÙŠØ© ÙÙ‚Ø·ØŒ Ø¨Ù„ ØªØµÙ†Ø¹ ØªØ§Ø±ÙŠØ®Ø§Ù‹ ğŸ†",
"Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ØªÙ†ØªØ¸Ø± Ù…Ù† ÙŠØ®Ø¯Ù…Ù‡Ø§ Ø¨Ø§Ù„ØªÙ‚Ù†ÙŠØ©.. ÙˆØ£Ù†Øª Ø°Ù„Ùƒ Ø§Ù„Ø´Ø®Øµ ğŸ’ª",
"ÙƒÙ„ Ø³Ø·Ø± ÙƒÙˆØ¯ ØªÙƒØªØ¨Ù‡ Ù‡Ùˆ Ù„Ø¨Ù†Ø© ÙÙŠ Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ ğŸ§±",
"Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø·ÙˆÙŠÙ„ Ù„ÙƒÙ† ÙƒÙ„ Ø®Ø·ÙˆØ© ØªØ­Ø³Ø¨ âœ¨",
"Ù„Ø§ ØªÙ‚Ø§Ø±Ù† Ù†ÙØ³Ùƒ Ø¨Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŒ Ù‚Ø§Ø±Ù† Ù†ÙØ³Ùƒ Ø¨Ø§Ù„Ø£Ù…Ø³ ğŸ“ˆ",
"Ø§Ù„Ù…Ù†Ø­Ø© Ù„ÙŠØ³Øª Ø­Ù„Ù…Ø§Ù‹ Ø¨Ø¹ÙŠØ¯Ø§Ù‹ØŒ Ø¥Ù†Ù‡Ø§ Ù‡Ø¯Ù Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ­Ù‚ÙŠÙ‚ ğŸ¯",
"Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ø¹Ù‚Ù„ÙƒØŒ ÙÙ‡Ùˆ Ø£ÙØ¶Ù„ Ø§Ø³ØªØ«Ù…Ø§Ø± ğŸ§ ",
"Ø§Ù„Ù†Ø¬Ø§Ø­ Ù„ÙŠØ³ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø·Ø±ÙŠÙ‚ØŒ Ø¨Ù„ Ø¨Ø¯Ø§ÙŠØ© Ø·Ø±ÙŠÙ‚ Ø£ÙØ¶Ù„ ğŸš€",
"Ù¢Ù Ù¢Ù¨ Ø³ØªÙƒÙˆÙ† Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬ ÙˆØ§Ù„ØªØ­ÙˆÙ„ Ø§Ù„ÙƒØ¨ÙŠØ± ğŸ“",
"ØªØ¹Ù„Ù‘Ù… Ø§Ù„ÙŠÙˆÙ… Ù…Ø§ ÙŠØ­ØªØ§Ø¬Ù‡ Ø§Ù„Ø¹Ø§Ù„Ù… ØºØ¯Ø§Ù‹ ğŸŒ",
"Ø£Ù†Øª Ø¹Ù„Ù‰ Ø¨ÙØ¹Ø¯ Ø®Ø·ÙˆØ§Øª Ù…Ù† Ø£Ù† ØªÙƒÙˆÙ† Ù…Ù…ÙŠØ²Ø§Ù‹ ğŸŒˆ",
"Ø§Ù„ØµØ¨Ø± Ù…ÙØªØ§Ø­ Ø§Ù„ÙØ±Ø¬ØŒ ÙˆØ§Ù„Ù…Ø«Ø§Ø¨Ø±Ø© Ù…ÙØªØ§Ø­ Ø§Ù„Ù†Ø¬Ø§Ø­ ğŸ”‘",
"Ø­Ù„Ù…Ùƒ ÙŠØ³ØªØ­Ù‚ ÙƒÙ„ Ø§Ù„ØªØ¹Ø¨ ÙˆØ§Ù„Ø³Ù‡Ø± ğŸ’«"
],
en:[
"Every new thing you learn brings you closer to your dream ğŸŒŸ",
"Knowledge must be sought â€” so go after it ğŸ“š",
"You're not just building a career, you're making history ğŸ†",
"Arabic language awaits someone to serve it with tech â€” that's YOU ğŸ’ª",
"Every line of code is a brick in your future ğŸ§±",
"The road is long but every step counts âœ¨",
"Don't compare yourself to others, compare to yesterday ğŸ“ˆ",
"The scholarship isn't a distant dream â€” it's an achievable goal ğŸ¯",
"Invest in your mind â€” it's the best investment ğŸ§ ",
"Success isn't the end, it's the beginning of a better path ğŸš€",
"2028 will be the year of graduation and transformation ğŸ“",
"Learn today what the world needs tomorrow ğŸŒ",
"You're just steps away from being exceptional ğŸŒˆ",
"Patience is the key, perseverance is the master key ğŸ”‘",
"Your dream deserves every effort and late night ğŸ’«"
]};

function getMotiv(){
  var list=MOTIVATIONS[S.lang];
  var idx=Math.floor(Date.now()/(1000*60*60*3))%list.length; // changes every 3 hours
  return list[idx];
}

var HDR_CHARS=['ğŸ‘¨â€ğŸ’»','ğŸ§‘â€ğŸ”¬','ğŸ“–','ğŸ“','ğŸš€','ğŸ’¡','ğŸ§ ','âš¡'];
function getHdrChar(){var idx=Math.floor(Date.now()/(1000*60*60*6))%HDR_CHARS.length;return HDR_CHARS[idx]}

// ======================== TR ========================
var TR={
ar:{nH:'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',nP:'Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª',nTL:'Ø§Ù„ØªØ§ÙŠÙ… Ù„Ø§ÙŠÙ†',nS:'Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',nSt:'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
gm:'ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±',ga:'Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±',ge:'Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±',
rem:'Ø¨Ø§Ù‚ÙŠ',days:'ÙŠÙˆÙ…',weeks:'Ø£Ø³Ø¨ÙˆØ¹',months:'Ø´Ù‡Ø±',grad:'Ø¹Ù„Ù‰ Ø§Ù„ØªØ®Ø±Ø¬',
mp:'ğŸ›¤ï¸ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',items:'Ø¹Ù†ØµØ±',cds:'â³ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª',
upc:'ğŸ“… Ø§Ù„Ù‚Ø§Ø¯Ù…',noUp:'Ù„Ø§ Ø£Ø­Ø¯Ø§Ø« Ù‚Ø§Ø¯Ù…Ø© ğŸ‰',pathsT:'ğŸ“‹ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª',all:'Ø§Ù„ÙƒÙ„',
save:'Ø­ÙØ¸',cancel:'Ø¥Ù„ØºØ§Ø¡',del:'Ø­Ø°Ù',confirm:'ØªØ£ÙƒÙŠØ¯',
statsT:'ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',ov:'Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©',gpaC:'Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±',
streakT:'Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ© ğŸ”¥',prog:'Ø§Ù„ØªÙ‚Ø¯Ù…',updProg:'ğŸ“Š ØªØ­Ø¯ÙŠØ«',
edit:'âœï¸ ØªØ¹Ø¯ÙŠÙ„',addSub2:'+ ÙØ±Ø¹ÙŠ',delItem:'Ø­Ø°Ù',
book:'ÙƒØªØ§Ø¨',video:'ÙÙŠØ¯ÙŠÙˆ',practice:'Ù…Ù…Ø§Ø±Ø³Ø©',pages:'ØµÙØ­Ø©',sections:'Ù‚Ø³Ù…',units:'ÙˆØ­Ø¯Ø©',
estF:'â° Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹',estBranch:'â° Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹',
settingsT:'âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',darkM:'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ',langS:'Ø§Ù„Ù„ØºØ©',
expD:'ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',impD:'Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',delAll:'Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
delConf:'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ!',deleted:'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',exported:'ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± âœ…',
imported:'ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨Ù†Ø¬Ø§Ø­ âœ…',about:'ØªØ·Ø¨ÙŠÙ‚ ØªØªØ¨Ø¹ Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¹Ù„Ù… Ù„ØªØµØ¨Ø­ Ù…Ù‡Ù†Ø¯Ø³ Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ© Ø­Ø§Ø³ÙˆØ¨ÙŠ ğŸš€',
sem:'Ø§Ù„ÙØµÙ„',addSub:'+ Ù…Ø§Ø¯Ø©',addSem:'+ ÙØµÙ„ Ø¬Ø¯ÙŠØ¯',calcGpa:'Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±',
excellent:'Ù…Ù…ØªØ§Ø²',vgood:'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹',good:'Ø¬ÙŠØ¯',pass:'Ù…Ù‚Ø¨ÙˆÙ„',weak:'Ø¶Ø¹ÙŠÙ',vweak:'Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹',
cumGrade:'Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ',gpa4:'GPA 4.0',ukClass:'UK Class',
advGpa:'ğŸ’¡ Ù†ØµÙŠØ­Ø©: ',adv1:'Ù…Ù…ØªØ§Ø²! ØªÙ‚Ø¯ÙŠØ±Ùƒ Ù…Ø¤Ù‡Ù„ Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†Ø­ ğŸ†',adv2:'Ø¬ÙŠØ¯. Ø­Ø§ÙˆÙ„ Ø±ÙØ¹ ØªÙ‚Ø¯ÙŠØ±Ùƒ Ù„ÙØ±Øµ Ù…Ù†Ø­ Ø£ÙØ¶Ù„ ğŸ“ˆ',adv3:'Ø±ÙƒØ² Ø¹Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ø¯Ø±Ø¬Ø§ØªÙƒ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ğŸ’ª',
youHere:'ğŸ“ Ø£Ù†Øª Ù‡Ù†Ø§',markDone:'ØªÙ… âœ“',markUn:'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ù„ÙŠÙ…',
progSaved:'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù… âœ…',
tlTitle:'ğŸ“… Ø§Ù„ØªØ§ÙŠÙ… Ù„Ø§ÙŠÙ†',
itemName:'Ø§Ø³Ù… Ø§Ù„Ø¹Ù†ØµØ±',itemType:'Ø§Ù„Ù†ÙˆØ¹',itemTotal:'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ',
addItem:'+ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ±',addSubtask:'Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ©',
subName:'Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©',editItem:'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù†ØµØ±',
daysUnit:'ÙŠÙˆÙ…',weeksUnit:'Ø£Ø³Ø¨ÙˆØ¹',monthsUnit:'Ø´Ù‡Ø±'
},
en:{nH:'Home',nP:'Paths',nTL:'Timeline',nS:'Stats',nSt:'Settings',
gm:'Good morning',ga:'Good afternoon',ge:'Good evening',
rem:'',days:'days',weeks:'weeks',months:'months',grad:'until graduation',
mp:'ğŸ›¤ï¸ Main Paths',items:'items',cds:'â³ Countdowns',
upc:'ğŸ“… Upcoming',noUp:'No upcoming events ğŸ‰',pathsT:'ğŸ“‹ Paths',all:'All',
save:'Save',cancel:'Cancel',del:'Delete',confirm:'Confirm',
statsT:'ğŸ“Š Statistics',ov:'Overview',gpaC:'GPA Calculator',
streakT:'Day Streak ğŸ”¥',prog:'Progress',updProg:'ğŸ“Š Update',
edit:'âœï¸ Edit',addSub2:'+ Subtask',delItem:'Delete',
book:'Book',video:'Video',practice:'Practice',pages:'pages',sections:'sections',units:'units',
estF:'â° Est. completion',estBranch:'â° Est. path completion',
settingsT:'âš™ï¸ Settings',darkM:'Dark Mode',langS:'Language',
expD:'Export Data',impD:'Import Data',delAll:'Delete All Data',
delConf:'Are you sure? All data will be deleted!',deleted:'Data deleted',exported:'Exported âœ…',
imported:'Imported successfully âœ…',about:'Track your journey to become an Arabic NLP Engineer ğŸš€',
sem:'Semester',addSub:'+ Subject',addSem:'+ New Semester',calcGpa:'Calculate GPA',
excellent:'Excellent',vgood:'Very Good',good:'Good',pass:'Pass',weak:'Weak',vweak:'Very Weak',
cumGrade:'Cumulative Grade',gpa4:'GPA 4.0',ukClass:'UK Class',
advGpa:'ğŸ’¡ Tip: ',adv1:'Excellent! Qualifies for top scholarships ğŸ†',adv2:'Good. Try improving for better scholarship chances ğŸ“ˆ',adv3:'Focus on improving upcoming grades ğŸ’ª',
youHere:'ğŸ“ You are here',markDone:'Done âœ“',markUn:'Unmarked',
progSaved:'Progress updated âœ…',
tlTitle:'ğŸ“… Timeline',
itemName:'Item name',itemType:'Type',itemTotal:'Total',
addItem:'+ Add Item',addSubtask:'Subtask name',
subName:'Subject name',editItem:'Edit Item',
daysUnit:'days',weeksUnit:'weeks',monthsUnit:'months'
}};
function t(k){return TR[S.lang][k]||TR.ar[k]||k}

// ======================== DATA ========================
var DATA={
countdowns:[
{id:'grad',icon:'ğŸ“',name:'Ø§Ù„ØªØ®Ø±Ø¬',nameEn:'Graduation',date:'2028-06-30'},
{id:'income',icon:'ğŸ’°',name:'Ø£ÙˆÙ„ Ø¯Ø®Ù„',nameEn:'First Income',date:'2027-08-01'},
{id:'schol',icon:'ğŸŒ',name:'ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ù†Ø­',nameEn:'Scholarships',date:'2028-09-01'},
{id:'exams1',icon:'ğŸ“',name:'Ø§Ù…ØªØ­Ø§Ù†Ø§Øª ØªØ±Ù… 1',nameEn:'Sem 1 Exams',date:'2027-01-15'},
{id:'exams2',icon:'ğŸ“',name:'Ø§Ù…ØªØ­Ø§Ù†Ø§Øª ØªØ±Ù… 2',nameEn:'Sem 2 Exams',date:'2027-05-15'}
],
timeline:[
{date:'2026-03-01',title:'Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø±Ø­Ù„Ø© ğŸš€',titleEn:'Journey Start ğŸš€',desc:'Ø§Ù†Ø·Ù„Ø§Ù‚ Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°Ø§ØªÙŠ',descEn:'Self-learning journey begins'},
{date:'2026-06-01',title:'Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø³Ù†Ø© 2',titleEn:'Year 2 Exams',desc:'Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¨Ø§Ù„ÙƒÙ„ÙŠØ©',descEn:'Completing 2nd year'},
{date:'2026-08-01',title:'Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ£Ø³ÙŠØ³ ğŸ—ï¸',titleEn:'Foundation End ğŸ—ï¸',desc:'Ø¥ØªÙ…Ø§Ù… Ø£Ø³Ø§Ø³ÙŠØ§Øª Python ÙˆØ§Ù„Ù†Ø­Ùˆ ÙˆØ§Ù„ØµØ±Ù',descEn:'Complete Python, Grammar, Morphology basics'},
{date:'2027-01-15',title:'Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø³Ù†Ø© 3 - ØªØ±Ù… 1',titleEn:'Year 3 Sem 1 Exams',desc:'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„',descEn:'First semester exams'},
{date:'2027-05-15',title:'Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø³Ù†Ø© 3 - ØªØ±Ù… 2',titleEn:'Year 3 Sem 2 Exams',desc:'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ',descEn:'Second semester exams'},
{date:'2027-08-01',title:'Ø£ÙˆÙ„ Ø¯Ø®Ù„ ğŸ’°',titleEn:'First Income ğŸ’°',desc:'Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø­Ø± ÙÙŠ NLP',descEn:'Start freelancing in NLP'},
{date:'2028-01-15',title:'Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø³Ù†Ø© 4 - ØªØ±Ù… 1',titleEn:'Year 4 Sem 1 Exams',desc:'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„',descEn:'First semester exams'},
{date:'2028-06-30',title:'Ø§Ù„ØªØ®Ø±Ø¬ ğŸ“',titleEn:'Graduation ğŸ“',desc:'Ø¥Ù†Ù‡Ø§Ø¡ ÙƒÙ„ÙŠØ© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„Ø£Ø²Ù‡Ø±',descEn:'Complete Arabic Language Faculty - Al-Azhar'},
{date:'2028-09-01',title:'ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ù†Ø­ ğŸŒ',titleEn:'Apply Scholarships ğŸŒ',desc:'Chevening, Fulbright ÙˆØºÙŠØ±Ù‡Ø§',descEn:'Chevening, Fulbright and more'},
{date:'2029-09-01',title:'Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø§Ø¬Ø³ØªÙŠØ± ğŸ¯',titleEn:'Start Masters ğŸ¯',desc:'Ù…Ø§Ø¬Ø³ØªÙŠØ± Ù„Ø³Ø§Ù†ÙŠØ§Øª Ø­Ø§Ø³ÙˆØ¨ÙŠØ©',descEn:'Computational Linguistics Masters'}
],
roots:[
{id:'root_arabic',name:'Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',nameEn:'Arabic Language',icon:'ğŸŒ³',branches:[
  {id:'b_sounds',name:'Ø§Ù„Ø£ØµÙˆØ§Øª ÙˆØ§Ù„ØªØ¬ÙˆÙŠØ¯',nameEn:'Phonetics & Tajweed',icon:'ğŸ”Š',sections:[
    {name:'Ø§Ù„Ø£ØµÙˆØ§Øª',nameEn:'Phonetics',items:[
      {id:'s1',name:'Ø§Ù„Ø£ØµÙˆØ§Øª: Ø§Ù„Ù…Ø¯Ø®Ù„ Ù„Ø¹Ù„Ù… Ø£ØµÙˆØ§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© â€“ ØºØ§Ù†Ù… Ù‚Ø¯ÙˆØ±ÙŠ',type:'book',total:300},
      {id:'s2',name:'Ø¹Ù„Ù… Ø§Ù„Ø£ØµÙˆØ§Øª â€“ ÙƒÙ…Ø§Ù„ Ø¨Ø´Ø±',type:'book',total:400},
      {id:'s3',name:'Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© â€“ ØºØ§Ù†Ù… Ù‚Ø¯ÙˆØ±ÙŠ',type:'book',total:350}]},
    {name:'Ø§Ù„ØªØ¬ÙˆÙŠØ¯',nameEn:'Tajweed',items:[
      {id:'s4',name:'Ø§Ù„ØªØ¬ÙˆÙŠØ¯ Ø§Ù„Ù…ØµÙˆØ± â€“ Ø£ÙŠÙ…Ù† Ø³ÙˆÙŠØ¯',type:'video',total:50},
      {id:'s5',name:'Ø§Ù„Ù…ÙŠØ³Ø± ÙÙŠ Ø§Ù„ØªØ¬ÙˆÙŠØ¯',type:'book',total:250},
      {id:'s6',name:'ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø§Ù„ Ø´Ø±Ø­ ØªØ­ÙØ© Ø§Ù„Ø£Ø·ÙØ§Ù„',type:'book',total:200}]}
  ]},
  {id:'b_sarf',name:'Ø§Ù„ØµØ±Ù â­',nameEn:'Morphology â­',icon:'ğŸ“',sections:[
    {name:'Ù…Ø±Ø­Ù„Ø© 1',nameEn:'Phase 1',items:[
      {id:'sf1',name:'Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØµØ±Ù â€“ Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ø¯Ø¨',type:'video',total:30},
      {id:'sf2',name:'Ø§Ù„Ø£Ø³Ø§Ø³ ÙÙŠ Ø§Ù„ØµØ±Ù â€“ Ø§Ù„Ø²Ø§Ù‡Ø¯ÙŠ',type:'book',total:320},
      {id:'sf3',name:'Ø´Ø±Ø­ Ù…ØªÙ† Ø§Ù„Ø¨Ù†Ø§Ø¡ â€“ Ù…Ø­Ù…Ø¯ Ø±Ø´ÙŠØ¯',type:'video',total:20},
      {id:'sf4',name:'ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø£Ø³Ø§Ø³',type:'book',total:150}]},
    {name:'Ù…Ø±Ø­Ù„Ø© 2',nameEn:'Phase 2',items:[
      {id:'sf5',name:'Ù„Ø§Ù…ÙŠØ© Ø§Ù„Ø£ÙØ¹Ø§Ù„ â€“ Ø§Ù„Ù‡Ø±Ø±ÙŠ',type:'book',total:300},
      {id:'sf6',name:'Ø­ÙØ¸ Ù„Ø§Ù…ÙŠØ© Ø§Ù„Ø£ÙØ¹Ø§Ù„',type:'practice',total:30},
      {id:'sf7',name:'Ù…Ø®ØªØµØ± Ø§Ù„Ø®Ø·ÙŠØ¨',type:'book',total:250},
      {id:'sf8',name:'Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØµØ±ÙÙŠ â€“ Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ',type:'book',total:280},
      {id:'sf9',name:'Ø¯Ø±ÙˆØ³ Ø§Ù„ØªØµØ±ÙŠÙ',type:'book',total:200}]}
  ]},
  {id:'b_nahw',name:'Ø§Ù„Ù†Ø­Ùˆ â­',nameEn:'Grammar â­',icon:'ğŸ“',sections:[
    {name:'Ù…Ø¯Ø®Ù„',nameEn:'Introduction',items:[
      {id:'n1',name:'Ù…Ø¯Ø®Ù„ Ø¹Ù„Ù… Ø§Ù„Ù„ØºØ© â€“ Ø§Ù„Ø¹Ù…Ø±ÙŠ',type:'video',total:6},
      {id:'n2',name:'Ù†Ø´Ø£Ø© Ø§Ù„Ù†Ø­Ùˆ â€“ Ø§Ù„Ø·Ù†Ø·Ø§ÙˆÙŠ',type:'book',total:250},
      {id:'n3',name:'Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ù†Ø­ÙˆÙŠØ© â€“ Ø¶ÙŠÙ',type:'book',total:350}]},
    {name:'ØªØ£Ø³ÙŠØ³ÙŠ',nameEn:'Foundation',items:[
      {id:'n4',name:'Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ø­ÙˆÙŠ â€“ Ø§Ù„Ø¹Ù…Ø±ÙŠ',type:'video',total:15},
      {id:'n5',name:'Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù†Ø­Ùˆ â€“ Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ø¯Ø¨',type:'video',total:40},
      {id:'n6',name:'Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„ÙˆØ§Ø¶Ø­ â€“ Ø§Ù„Ø¬Ø§Ø±Ù…',type:'book',total:380},
      {id:'n7',name:'Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ø­ÙˆÙŠ â€“ Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ',type:'book',total:300},
      {id:'n8',name:'Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø¥Ø¹Ø±Ø§Ø¨',type:'book',total:200}]},
    {name:'Ù…ØªÙ‚Ø¯Ù…',nameEn:'Advanced',items:[
      {id:'n9',name:'Ø­ÙØ¸ Ù†Ø¸Ù… Ø¹Ø¨ÙŠØ¯ Ø±Ø¨Ù‡',type:'practice',total:40},
      {id:'n10',name:'Ø£ÙŠØ³Ø± Ø§Ù„Ø´Ø±ÙˆØ­ â€“ Ø§Ù„Ø­Ø±Ø¨ÙŠ',type:'book',total:400},
      {id:'n11',name:'Ø§Ù„ØªØ­ÙØ© Ø§Ù„Ø³Ù†ÙŠØ©',type:'book',total:350}]}
  ]},
  {id:'b_balagha',name:'Ø§Ù„Ø¨Ù„Ø§ØºØ©',nameEn:'Rhetoric',icon:'ğŸ¨',sections:[
    {name:'Ø§Ù„Ø¨Ù„Ø§ØºØ©',nameEn:'Rhetoric',items:[
      {id:'bl1',name:'Ø§Ù„Ø¨Ù„Ø§ØºØ© Ø§Ù„ÙˆØ§Ø¶Ø­Ø©',type:'book',total:300},
      {id:'bl2',name:'Ø¬ÙˆØ§Ù‡Ø± Ø§Ù„Ø¨Ù„Ø§ØºØ©',type:'book',total:350},
      {id:'bl3',name:'Ø§Ù„Ø¨Ù„Ø§ØºØ© ØªØ·ÙˆØ± ÙˆØªØ§Ø±ÙŠØ®',type:'book',total:280},
      {id:'bl4',name:'Ø§Ù„Ù…Ù†Ù‡Ø§Ø¬ Ø§Ù„ÙˆØ§Ø¶Ø­',type:'book',total:400}]}
  ]},
  {id:'b_dalala',name:'Ø§Ù„Ø¯Ù„Ø§Ù„Ø© â­',nameEn:'Semantics â­',icon:'ğŸ¯',sections:[
    {name:'Ø§Ù„Ø¯Ù„Ø§Ù„Ø©',nameEn:'Semantics',items:[
      {id:'dl1',name:'Ø¹Ù„Ù… Ø§Ù„Ø¯Ù„Ø§Ù„Ø© â€“ Ù…Ø®ØªØ§Ø± Ø¹Ù…Ø±',type:'book',total:350},
      {id:'dl2',name:'Ø§Ù„Ø¯Ù„Ø§Ù„Ø© ÙˆØ§Ù„ØªØ®Ø§Ø·Ø¨ â€“ ÙŠÙˆÙ†Ø³',type:'book',total:300},
      {id:'dl3',name:'Ø§Ù„ØªØ·ÙˆØ± Ø§Ù„Ù„ØºÙˆÙŠ',type:'book',total:250},
      {id:'dl4',name:'ÙÙ‡Ù… Ø§Ù„ÙÙ‡Ù…',type:'book',total:300}]}
  ]},
  {id:'b_fiqh',name:'ÙÙ‚Ù‡ Ø§Ù„Ù„ØºØ©',nameEn:'Philology',icon:'ğŸ”¬',sections:[
    {name:'ÙÙ‚Ù‡ Ø§Ù„Ù„ØºØ©',nameEn:'Philology',items:[
      {id:'fq1',name:'ÙÙ‚Ù‡ Ø§Ù„Ù„ØºØ© â€“ Ø§Ù„Ø­Ù…Ø¯',type:'book',total:250},
      {id:'fq2',name:'ÙØµÙˆÙ„ ÙÙŠ ÙÙ‚Ù‡ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',type:'book',total:300},
      {id:'fq3',name:'Ø§Ù„Ù„Ù‡Ø¬Ø§Øª â€“ Ø¨Ø´Ø±',type:'book',total:300}]}
  ]},
  {id:'b_dict',name:'Ø§Ù„Ù…Ø¹Ø§Ø¬Ù…',nameEn:'Lexicography',icon:'ğŸ“š',sections:[
    {name:'Ø§Ù„Ù…Ø¹Ø§Ø¬Ù…',nameEn:'Lexicography',items:[
      {id:'dc1',name:'Ø¯ÙˆØ±Ø© ÙÙ‚Ù‡ Ø§Ù„Ù„ØºØ© â€“ ÙÙ‡Ù…ÙŠ',type:'video',total:8},
      {id:'dc2',name:'Ø§Ù„Ù…Ø¹Ø¬Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ â€“ Ù†ØµØ§Ø±',type:'book',total:400},
      {id:'dc3',name:'Ø§Ù„Ù…ØµØ¨Ø§Ø­ Ø§Ù„Ù…Ù†ÙŠØ±',type:'book',total:500}]}
  ]},
  {id:'b_ling',name:'Ø§Ù„Ù„Ø³Ø§Ù†ÙŠØ§Øª',nameEn:'Linguistics',icon:'ğŸ§ ',sections:[
    {name:'Ø¹Ø§Ù…Ø©',nameEn:'General',items:[
      {id:'lg1',name:'Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ù„Ø³Ø§Ù†ÙŠØ§Øª â€“ Ù‚Ø¯ÙˆØ±',type:'book',total:300},
      {id:'lg2',name:'Ø¹Ù„Ù… Ø§Ù„Ù„ØºØ© â€“ Ø§Ù„Ø³Ø¹Ø±Ø§Ù†',type:'book',total:300},
      {id:'lg3',name:'Ù…Ø¯Ø®Ù„ Ø§Ù„Ù„Ø³Ø§Ù†ÙŠØ§Øª â€“ ÙŠÙˆÙ†Ø³',type:'book',total:280}]},
    {name:'Ø­Ø§Ø³ÙˆØ¨ÙŠØ© â­',nameEn:'Computational â­',items:[
      {id:'lg4',name:'Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ø­Ø§Ø³ÙˆØ¨ â€“ Ù†Ø¨ÙŠÙ„ Ø¹Ù„ÙŠ â­',type:'book',total:450,star:true},
      {id:'lg5',name:'Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¢Ù„ÙŠØ© â€“ Ø³Ù„ÙˆÙ‰ Ø­Ù…Ø§Ø¯Ø©',type:'book',total:300},
      {id:'lg6',name:'Ù…ÙŠÙƒÙ†Ø© Ø§Ù„Ù„ØºØ© â€“ Ø±Ø£ÙØª Ø§Ù„ÙƒÙ…Ø§Ø±',type:'book',total:350},
      {id:'lg7',name:'CAMeL Lab',type:'practice',total:20},
      {id:'lg8',name:'Quran Corpus',type:'practice',total:10}]}
  ]},
  {id:'b_qiraat',name:'Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª',nameEn:'Quranic Readings',icon:'ğŸ“•',sections:[
    {name:'Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª',nameEn:'Readings',items:[
      {id:'qr1',name:'Ø§Ù„Ù…Ø¯Ø®Ù„ â€“ Ø§Ù„Ø³Ù†Ø¯ÙŠ',type:'book',total:200},
      {id:'qr2',name:'Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª â€“ Ù‚Ø§Ø¨Ø©',type:'book',total:300},
      {id:'qr3',name:'Ø§Ù„Ø´Ø§Ø·Ø¨ÙŠØ©',type:'book',total:200},
      {id:'qr4',name:'Ø§Ù„ÙˆØ§ÙÙŠ â€“ Ø§Ù„Ù‚Ø§Ø¶ÙŠ',type:'book',total:400},
      {id:'qr5',name:'Ø®ØªÙ…Ø© Ø¨Ø§Ù„Ø³Ø¨Ø¹',type:'practice',total:30}]}
  ]},
  {id:'b_college',name:'Ø§Ù„ÙƒÙ„ÙŠØ©',nameEn:'College',icon:'ğŸ“',sections:[
    {name:'Ù…ÙˆØ§Ø¯ Ø§Ù„ÙƒÙ„ÙŠØ©',nameEn:'College',items:[
      {id:'cl1',name:'Ù…ÙˆØ§Ø¯ Ø³Ù†Ø© 2',type:'practice',total:1},
      {id:'cl2',name:'Ù…ÙˆØ§Ø¯ Ø³Ù†Ø© 3',type:'practice',total:1},
      {id:'cl3',name:'Ù…ÙˆØ§Ø¯ Ø³Ù†Ø© 4',type:'practice',total:1}]}
  ]}
]},
{id:'root_nlp',name:'NLP',nameEn:'NLP',icon:'ğŸ”§',branches:[
  {id:'b_python',name:'Python',nameEn:'Python',icon:'ğŸ’»',sections:[
    {name:'Python',nameEn:'Python',items:[
      {id:'py1',name:'Angela Yu â€“ 100 Days of Code',type:'video',total:100},
      {id:'py2',name:'OOP',type:'video',total:15},
      {id:'py3',name:'Regex',type:'video',total:10},
      {id:'py4',name:'NumPy',type:'video',total:15},
      {id:'py5',name:'Pandas',type:'video',total:20},
      {id:'py6',name:'Matplotlib',type:'video',total:10},
      {id:'py7',name:'Git',type:'video',total:10}]}
  ]},
  {id:'b_english',name:'Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ',nameEn:'English',icon:'ğŸ‡¬ğŸ‡§',sections:[
    {name:'Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ',nameEn:'English',items:[
      {id:'en1',name:'Scott Mendoza',type:'video',total:50},
      {id:'en2',name:'IELTS Preparation',type:'video',total:30},
      {id:'en3',name:'Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©',type:'practice',total:12}]}
  ]},
  {id:'b_math',name:'Ø±ÙŠØ§Ø¶ÙŠØ§Øª',nameEn:'Mathematics',icon:'ğŸ“Š',sections:[
    {name:'Ø±ÙŠØ§Ø¶ÙŠØ§Øª',nameEn:'Mathematics',items:[
      {id:'mt1',name:'Khan Academy',type:'video',total:20},
      {id:'mt2',name:'Ø¬Ø¨Ø± Ø®Ø·ÙŠ',type:'video',total:15},
      {id:'mt3',name:'Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª',type:'video',total:15},
      {id:'mt4',name:'Ø¥Ø­ØµØ§Ø¡',type:'video',total:20}]}
  ]},
  {id:'b_ml',name:'ML + NLP + DL',nameEn:'ML + NLP + DL',icon:'ğŸ¤–',sections:[
    {name:'ML',nameEn:'ML',items:[
      {id:'ml1',name:'Andrew Ng â€“ Machine Learning',type:'video',total:40},
      {id:'ml2',name:'scikit-learn Projects',type:'practice',total:15}]},
    {name:'NLP',nameEn:'NLP',items:[
      {id:'ml3',name:'NLP Specialization',type:'video',total:30},
      {id:'ml4',name:'CAMeL Tools',type:'practice',total:10},
      {id:'ml5',name:'Farasa',type:'practice',total:10}]},
    {name:'DL',nameEn:'Deep Learning',items:[
      {id:'ml6',name:'Deep Learning â€“ Andrew Ng',type:'video',total:50},
      {id:'ml7',name:'HuggingFace',type:'video',total:20},
      {id:'ml8',name:'AraBERT',type:'practice',total:10},
      {id:'ml9',name:'Ù…Ø´Ø±ÙˆØ¹ 1: ØªØµÙ†ÙŠÙ Ù†ØµÙˆØµ',type:'practice',total:1},
      {id:'ml10',name:'Ù…Ø´Ø±ÙˆØ¹ 2: ØªØ­Ù„ÙŠÙ„ Ù…Ø´Ø§Ø¹Ø±',type:'practice',total:1},
      {id:'ml11',name:'Ù…Ø´Ø±ÙˆØ¹ 3: NER Ø¹Ø±Ø¨ÙŠ',type:'practice',total:1},
      {id:'ml12',name:'Ù…Ø´Ø±ÙˆØ¹ 4: ØªØ´ÙƒÙŠÙ„ Ø¢Ù„ÙŠ',type:'practice',total:1},
      {id:'ml13',name:'Ù…Ø´Ø±ÙˆØ¹ 5: Chatbot Ø¹Ø±Ø¨ÙŠ',type:'practice',total:1}]}
  ]},
  {id:'b_schol',name:'Ø§Ù„Ù…Ù†Ø­Ø©',nameEn:'Scholarship',icon:'ğŸŒ',sections:[
    {name:'Ø§Ù„Ù…Ù†Ø­Ø©',nameEn:'Scholarship',items:[
      {id:'sc1',name:'Ø±ÙØ¹ GPA (8 ÙØµÙˆÙ„)',type:'practice',total:8},
      {id:'sc2',name:'IELTS 7+',type:'practice',total:1},
      {id:'sc3',name:'Ø¨Ø­Ø« Ù…Ù†Ø´ÙˆØ±',type:'practice',total:1},
      {id:'sc4',name:'3 Ø®Ø·Ø§Ø¨Ø§Øª ØªÙˆØµÙŠØ©',type:'practice',total:3},
      {id:'sc5',name:'Chevening',type:'practice',total:1},
      {id:'sc6',name:'Fulbright',type:'practice',total:1},
      {id:'sc7',name:'CV + SOP + LinkedIn',type:'practice',total:3}]}
  ]}
]},
{id:'root_reading',name:'Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©',nameEn:'Reading',icon:'ğŸ“š',branches:[
  {id:'b_thinking',name:'ÙƒØªØ¨ Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªÙÙƒÙŠØ±',nameEn:'Thinking Books',icon:'ğŸ§ ',sections:[
    {name:'Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª',nameEn:'Phase 1: Basics',items:[
      {id:'th1',name:'1. ÙØµÙˆÙ„ ÙÙŠ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠ',type:'book',total:280},
      {id:'th2',name:'2. Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… ÙˆØ§Ù„Ø£Ø¹ÙˆØ¬',type:'book',total:300},
      {id:'th3',name:'3. Ø§Ù„Ù…ØºØ§Ù„Ø·Ø§Øª Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ©',type:'book',total:250},
      {id:'th4',name:'4. Smart Thinking â€“ Allen Matthew',type:'book',total:320}]},
    {name:'Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„ØªÙˆØ³Ø¹',nameEn:'Phase 2: Expansion',items:[
      {id:'th5',name:'5. Ø®Ø·ÙˆØ© Ù†Ø­Ùˆ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù‚ÙˆÙŠÙ…',type:'book',total:300},
      {id:'th6',name:'6. ÙÙ† Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„ÙˆØ§Ø¶Ø­',type:'book',total:280},
      {id:'th7',name:'7. Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ â€“ Ø¹Ù…Ø±Ùˆ ÙŠØ³',type:'book',total:350},
      {id:'th8',name:'8. Ø§Ù„Ø¯ÙØ§Ø¹ Ø¹Ù† Ø§Ù„Ø£ÙÙƒØ§Ø± â€“ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ø¹Ø¯ Ø§Ù„Ø¯ÙƒØ§Ù†',type:'book',total:400},
      {id:'th9',name:'9. Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø³Ø±ÙŠØ¹ ÙˆØ§Ù„Ø¨Ø·ÙŠØ¡ â€“ Ø¯Ø§Ù†ÙŠØ§Ù„ ÙƒØ§Ù†Ù…Ø§Ù†',type:'book',total:500}]}
  ]},
  {id:'b_chess',name:'Ø´Ø·Ø±Ù†Ø¬',nameEn:'Chess',icon:'â™Ÿï¸',sections:[
    {name:'Ø´Ø·Ø±Ù†Ø¬',nameEn:'Chess',items:[
      {id:'ch1',name:'ØªØ¹Ù„Ù… Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯',type:'practice',total:10},
      {id:'ch2',name:'Ø§ÙØªØªØ§Ø­ÙŠØ§Øª',type:'practice',total:20},
      {id:'ch3',name:'Ù†Ù‡Ø§ÙŠØ§Øª',type:'practice',total:20},
      {id:'ch4',name:'ØªÙ…Ø§Ø±ÙŠÙ† ÙŠÙˆÙ…ÙŠØ©',type:'practice',total:365},
      {id:'ch5',name:'Ù…Ø¨Ø§Ø±ÙŠØ§Øª',type:'practice',total:365}]}
  ]}
]}
]};

// ======================== UTILS ========================
function dU(ds){return Math.ceil((new Date(ds)-new Date())/(864e5))}
function fD(ds){var d=new Date(ds),m=S.lang==='ar'?['ÙŠÙ†Ø§ÙŠØ±','ÙØ¨Ø±Ø§ÙŠØ±','Ù…Ø§Ø±Ø³','Ø£Ø¨Ø±ÙŠÙ„','Ù…Ø§ÙŠÙˆ','ÙŠÙˆÙ†ÙŠÙˆ','ÙŠÙˆÙ„ÙŠÙˆ','Ø£ØºØ³Ø·Ø³','Ø³Ø¨ØªÙ…Ø¨Ø±','Ø£ÙƒØªÙˆØ¨Ø±','Ù†ÙˆÙÙ…Ø¨Ø±','Ø¯ÙŠØ³Ù…Ø¨Ø±']:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];return m[d.getMonth()]+' '+d.getFullYear()}
function gr(){var h=new Date().getHours();return h<12?t('gm'):h<18?t('ga'):t('ge')}
function toast(m){var e=document.getElementById('toast');e.textContent=m;e.classList.add('sh');setTimeout(function(){e.classList.remove('sh')},2200)}
function gC(rid){return{root_arabic:'#4CAF50',root_nlp:'#7C4DFF',root_reading:'#FF8C00'}[rid]||'#FF8C00'}
function gBg(rid){return{root_arabic:'var(--gbg)',root_nlp:'var(--pbg)',root_reading:'var(--obg)'}[rid]||'var(--obg)'}

function getItemData(iid){
  if(S.editedItems[iid])return S.editedItems[iid];
  var found=null;
  DATA.roots.forEach(function(r){r.branches.forEach(function(b){b.sections.forEach(function(s){s.items.forEach(function(it){if(it.id===iid)found=it})})})});
  return found;
}

function allItems(){var a=[];DATA.roots.forEach(function(r){r.branches.forEach(function(b){b.sections.forEach(function(s){s.items.forEach(function(it){a.push({i:getItemData(it.id)||it,bid:b.id,rid:r.id})})})})});return a}
function totProg(){var a=allItems();if(!a.length)return 0;var d=a.filter(function(x){return S.ck[x.i.id]}).length;return Math.round(d/a.length*100)}
function bProg(bid){var tot=0,dn=0;DATA.roots.forEach(function(r){r.branches.forEach(function(b){if(b.id===bid)b.sections.forEach(function(s){s.items.forEach(function(it){tot++;if(S.ck[it.id])dn++})})})});return{d:dn,t:tot,p:tot?Math.round(dn/tot*100):0}}
function rProg(rid){var tot=0,dn=0;var r=DATA.roots.find(function(x){return x.id===rid});if(!r)return{d:0,t:0,p:0};r.branches.forEach(function(b){b.sections.forEach(function(s){s.items.forEach(function(it){tot++;if(S.ck[it.id])dn++})})});return{d:dn,t:tot,p:tot?Math.round(dn/tot*100):0}}

function updStreak(){var td=new Date().toDateString();if(S.streak.ld===td)return;var yd=new Date(Date.now()-864e5).toDateString();if(S.streak.ld===yd){S.streak.c++}else if(S.streak.ld!==td){S.streak.c=1}S.streak.ld=td;sv()}

function estDate(it){
  var item=getItemData(it.id)||it;
  if(!item.total)return null;var p=S.ip[it.id]||0;var rem=item.total-p;if(rem<=0)return null;
  var days=0;if(item.type==='book')days=Math.ceil(rem/20);else if(item.type==='video')days=Math.ceil(rem/2);else days=Math.ceil(rem);
  var d=new Date();d.setDate(d.getDate()+days);return d.toLocaleDateString(S.lang==='ar'?'ar-EG':'en-US',{year:'numeric',month:'short',day:'numeric'});
}

function estBranch(bid){
  var maxDays=0;
  DATA.roots.forEach(function(r){r.branches.forEach(function(b){if(b.id===bid)b.sections.forEach(function(s){s.items.forEach(function(it){
    if(S.ck[it.id])return;
    var item=getItemData(it.id)||it;
    var p=S.ip[it.id]||0;var rem=(item.total||1)-p;if(rem<=0)return;
    var days=0;if(item.type==='book')days=Math.ceil(rem/20);else if(item.type==='video')days=Math.ceil(rem/2);else days=Math.ceil(rem);
    if(days>maxDays)maxDays=days;
  })})})});
  if(maxDays<=0)return null;
  var d=new Date();d.setDate(d.getDate()+maxDays);
  return d.toLocaleDateString(S.lang==='ar'?'ar-EG':'en-US',{year:'numeric',month:'short',day:'numeric'});
}

// Countdown display mode: days/weeks/months
function cdDisplay(id,days){
  var mode=S.cdMode[id]||'d';
  if(mode==='w')return{v:Math.ceil(days/7),u:t('weeksUnit')};
  if(mode==='m')return{v:Math.ceil(days/30),u:t('monthsUnit')};
  return{v:days,u:t('daysUnit')};
}
function toggleCdMode(id){
  var m=S.cdMode[id]||'d';
  S.cdMode[id]=m==='d'?'w':m==='w'?'m':'d';
  sv();rHome();
}

// ======================== ONBOARDING ========================
function nextOB(n){
  document.querySelectorAll('.ob-slide').forEach(function(s){s.classList.remove('act')});
  document.getElementById('ob'+n).classList.add('act');
}
function skipOB(){
  S.onboarded=true;sv();
  document.getElementById('onboard').classList.add('hide');
}

// ======================== NAVIGATION ========================
function nav(pg,flt){
  document.querySelectorAll('.page').forEach(function(p){p.classList.remove('act')});
  document.getElementById('pg-'+pg).classList.add('act');
  document.querySelectorAll('.ni').forEach(function(n){n.classList.toggle('act',n.dataset.p===pg)});
  S.pp=S.cp;S.cp=pg;
  if(pg==='home')rHome();
  else if(pg==='paths'){if(flt)S.pf=flt;rPaths()}
  else if(pg==='timeline')rTimeline();
  else if(pg==='stats')rStats();
  else if(pg==='settings')rSettings();
  sv();
}
document.querySelectorAll('.ni').forEach(function(b){b.addEventListener('click',function(){nav(b.dataset.p)})});
function goBack(){nav(S.pp||'paths')}

function openDet(bid){
  S.detBr=bid;S.pp='paths';
  document.querySelectorAll('.page').forEach(function(p){p.classList.remove('act')});
  document.getElementById('pg-detail').classList.add('act');
  S.cp='detail';rDetail(bid);
}

// ======================== MODAL ========================
function showMdl(){document.getElementById('mbd').classList.add('sh');document.getElementById('mdl').classList.add('sh')}
function closeMdl(){document.getElementById('mbd').classList.remove('sh');document.getElementById('mdl').classList.remove('sh')}

// ======================== RENDER HOME ========================
function rHome(){
  document.getElementById('greet').textContent=gr()+' ğŸ‘‹';
  document.getElementById('motiv').textContent=getMotiv();
  document.getElementById('hdr-char').textContent=getHdrChar();

  var gd=Math.max(0,dU(DATA.countdowns[0].date));
  var gdd=cdDisplay('grad_home',gd);
  document.getElementById('gcd').innerHTML='ğŸ“ '+(S.lang==='ar'?t('rem')+' <b>'+gdd.v+'</b> '+gdd.u+' '+t('grad'):'<b>'+gdd.v+'</b> '+gdd.u+' '+t('grad'));
  document.getElementById('gcd').onclick=function(){toggleCdMode('grad_home')};

  document.getElementById('h-pt-t').textContent=t('mp');
  document.getElementById('h-cd-t').textContent=t('cds');
  document.getElementById('h-up-t').textContent=t('upc');

  // Paths
  var ph='';
  DATA.roots.forEach(function(r){
    var p=rProg(r.id),cl=gC(r.id),bg=gBg(r.id),nm=S.lang==='ar'?r.name:r.nameEn;
    ph+='<div class="c pc" style="background:'+bg+';border-color:'+cl+'" onclick="nav(\'paths\',\''+r.id+'\')">';
    ph+='<div class="pi" style="background:'+cl+';color:#fff">'+r.icon+'</div>';
    ph+='<div class="pn">'+nm+'</div>';
    ph+='<div class="pf2">'+p.d+'/'+p.t+' '+t('items')+'</div>';
    ph+='<div class="pb"><div class="pfl" style="width:'+p.p+'%;background:'+cl+'"></div></div>';
    ph+='</div>';
  });
  document.getElementById('h-paths').innerHTML=ph;

  // Countdowns - sorted by nearest
  var cds=DATA.countdowns.slice().map(function(c){return{o:c,d:Math.max(0,dU(c.date))}}).sort(function(a,b){return a.d-b.d});
  var cdCols=['linear-gradient(135deg,#FF6B9D,#FF8A80)','linear-gradient(135deg,#7C4DFF,#B388FF)','linear-gradient(135deg,#4CAF50,#81C784)','linear-gradient(135deg,#2196F3,#64B5F6)','linear-gradient(135deg,#FF8C00,#FFB347)'];
  var cdH='';
  cds.forEach(function(c,i){
    var dd=cdDisplay(c.o.id,c.d);
    var lb=S.lang==='ar'?c.o.name:c.o.nameEn;
    cdH+='<div class="cdc" style="background:'+cdCols[i%5]+'" onclick="toggleCdMode(\''+c.o.id+'\');event.stopPropagation()">';
    cdH+='<div class="cdc-blob"></div>';
    cdH+='<div class="ci">'+c.o.icon+'</div><div class="cv">'+dd.v+'</div><div class="cl">'+dd.u+' Â· '+lb+'</div></div>';
  });
  document.getElementById('h-cds').innerHTML=cdH;

  // Upcoming
  var now=new Date(),upE=DATA.timeline.filter(function(x){return new Date(x.date)>now}).slice(0,3);
  var upH='';
  if(upE.length){upE.forEach(function(e){var lb=S.lang==='ar'?e.title:e.titleEn;var days=dU(e.date);upH+='<div class="ui"><div class="ud" style="background:var(--pri)"></div><div style="flex:1"><div class="ut">'+lb+'</div><div class="udt">'+fD(e.date)+' Â· '+days+' '+t('daysUnit')+'</div></div></div>'})}
  else{upH='<div class="emp"><div class="ei">ğŸŠ</div><div class="et">'+t('noUp')+'</div></div>'}
  document.getElementById('h-up').innerHTML=upH;
}

// ======================== RENDER PATHS ========================
function rPaths(){
  document.getElementById('paths-t').textContent=t('pathsT');
  var th='<button class="t '+(S.pf==='all'?'act':'')+'" onclick="sPF(\'all\')">'+t('all')+'</button>';
  DATA.roots.forEach(function(r){var nm=S.lang==='ar'?r.name:r.nameEn;th+='<button class="t '+(S.pf===r.id?'act':'')+'" onclick="sPF(\''+r.id+'\')">'+r.icon+' '+nm+'</button>'});
  document.getElementById('p-tabs').innerHTML=th;

  var h='',roots=S.pf==='all'?DATA.roots:DATA.roots.filter(function(r){return r.id===S.pf});
  roots.forEach(function(r){
    var rn=S.lang==='ar'?r.name:r.nameEn,cl=gC(r.id);
    h+='<div class="st" style="color:'+cl+'">'+r.icon+' '+rn+'</div>';
    r.branches.forEach(function(b){
      var p=bProg(b.id),nm=S.lang==='ar'?b.name:b.nameEn,bg=gBg(r.id);
      var eb=estBranch(b.id);
      h+='<div class="bc" onclick="openDet(\''+b.id+'\')">';
      h+='<div class="bic" style="background:'+bg+';color:'+cl+'">'+b.icon+'</div>';
      h+='<div class="bi"><div class="bn">'+nm+'</div>';
      h+='<div class="bm">'+p.d+'/'+p.t+' '+t('items')+'</div>';
      h+='<div class="pb"><div class="pfl" style="width:'+p.p+'%;background:'+cl+'"></div></div>';
      if(eb&&p.p<100)h+='<div class="best">'+t('estBranch')+': '+eb+'</div>';
      h+='</div><div style="font-size:13px;font-weight:700;color:'+cl+'">'+p.p+'%</div></div>';
    });
  });
  document.getElementById('p-list').innerHTML=h;
}
function sPF(f){S.pf=f;rPaths();sv()}

// ======================== RENDER DETAIL ========================
function rDetail(bid){
  var branch=null,rid='';
  DATA.roots.forEach(function(r){var b=r.branches.find(function(x){return x.id===bid});if(b){branch=b;rid=r.id}});
  if(!branch)return;
  var cl=gC(rid),nm=S.lang==='ar'?branch.name:branch.nameEn,p=bProg(bid);
  var eb=estBranch(bid);
  document.getElementById('d-title').textContent=branch.icon+' '+nm;
  document.getElementById('d-sub').textContent=p.d+'/'+p.t+' '+t('items');
  document.getElementById('bkb').textContent=S.lang==='ar'?'â†’':'â†';
  var progH='<div style="display:flex;justify-content:space-between;margin-bottom:5px"><span style="font-size:12px;font-weight:600">'+t('prog')+'</span><span style="font-size:12px;font-weight:700;color:'+cl+'">'+p.p+'%</span></div><div class="pb" style="height:9px"><div class="pfl" style="width:'+p.p+'%;background:'+cl+'"></div></div>';
  if(eb&&p.p<100)progH+='<div style="font-size:11px;color:var(--teal);margin-top:6px">'+t('estBranch')+': '+eb+'</div>';
  document.getElementById('d-prog').innerHTML=progH;

  var sh='';
  branch.sections.forEach(function(sec){
    var sn=S.lang==='ar'?sec.name:sec.nameEn;
    sh+='<div class="dsec"><div class="dsh" style="color:'+cl+'">'+sn+'</div>';
    sec.items.forEach(function(it){
      var item=getItemData(it.id)||it;
      var ck=S.ck[it.id],pg=S.ip[it.id]||0;
      var tl=item.type==='book'?'ğŸ“– '+t('book'):item.type==='video'?'ğŸ¬ '+t('video'):'ğŸ‹ï¸ '+t('practice');
      var hp=item.type==='book'||item.type==='video',tv=item.total||0;
      var un=item.type==='book'?t('pages'):item.type==='video'?t('sections'):t('units');
      var es=hp?estDate(item):null;
      var subs=S.subtasks[it.id]||[];

      sh+='<div class="chi"><div class="cc'+(ck?' chk':'')+'" onclick="tgCk(\''+it.id+'\',\''+bid+'\')">'+(ck?'âœ“':'')+'</div><div class="ccnt">';
      sh+='<div class="cnm'+(ck?' dn':'')+'">'+item.name+(item.star?' â­':'')+'</div>';
      sh+='<span class="ctp">'+tl+(tv?' Â· '+tv+' '+un:'')+'</span>';

      if(hp&&tv){
        var pp=Math.min(100,Math.round(pg/tv*100));
        sh+='<div class="cpr"><div class="pb"><div class="pfl" style="width:'+pp+'%;background:var(--grn)"></div></div><span class="cpt">'+pg+'/'+tv+'</span></div>';
        if(es&&!ck)sh+='<div class="ed">'+t('estF')+': '+es+'</div>';
      }

      // Subtasks
      if(subs.length){
        sh+='<div class="subtasks">';
        subs.forEach(function(sub,si){
          sh+='<div class="sub-item"><div class="sub-cc'+(sub.dn?' chk':'')+'" onclick="tgSub(\''+it.id+'\','+si+',\''+bid+'\')">'+(sub.dn?'âœ“':'')+'</div><div class="sub-nm'+(sub.dn?' dn':'')+'">'+sub.nm+'</div><button class="sub-del" onclick="delSub2(\''+it.id+'\','+si+',\''+bid+'\')">âœ•</button></div>';
        });
        sh+='</div>';
      }

      sh+='<div class="ca">';
      if(hp&&tv)sh+='<button class="cb p" onclick="openProg(\''+it.id+'\','+tv+',\''+un+'\',\''+bid+'\')">'+t('updProg')+'</button>';
      sh+='<button class="cb e" onclick="openEdit(\''+it.id+'\',\''+bid+'\')">'+t('edit')+'</button>';
      sh+='<button class="cb p" onclick="openAddSub(\''+it.id+'\',\''+bid+'\')">'+t('addSub2')+'</button>';
      sh+='</div></div></div>';
    });
    sh+='</div>';
  });
  document.getElementById('d-secs').innerHTML=sh;
}

function tgCk(iid,bid){S.ck[iid]=!S.ck[iid];if(S.ck[iid])updStreak();sv();rDetail(bid);toast(S.ck[iid]?t('markDone'):t('markUn'))}

function openProg(iid,tot,un,bid){
  var cur=S.ip[iid]||0;
  document.getElementById('mdl').innerHTML='<div class="mh"></div><h3>ğŸ“Š '+t('updProg')+'</h3><div class="nir"><input type="number" id="pinp" value="'+cur+'" min="0" max="'+tot+'"><span>/ '+tot+' '+un+'</span></div><div class="pb" style="height:9px;margin-bottom:14px"><div class="pfl" style="width:'+Math.round(cur/tot*100)+'%;background:var(--grn)" id="pprev"></div></div><button class="mb pr" onclick="svProg(\''+iid+'\','+tot+',\''+bid+'\')">'+t('save')+'</button><button class="mb sc" onclick="closeMdl()">'+t('cancel')+'</button>';
  document.getElementById('pinp').addEventListener('input',function(){
    var v=Math.min(tot,Math.max(0,parseInt(this.value)||0));
    document.getElementById('pprev').style.width=Math.round(v/tot*100)+'%';
  });
  showMdl();
}
function svProg(iid,tot,bid){
  var v=Math.min(tot,Math.max(0,parseInt(document.getElementById('pinp').value)||0));
  S.ip[iid]=v;if(v>=tot)S.ck[iid]=true;sv();closeMdl();rDetail(bid);toast(t('progSaved'));
}

function openEdit(iid,bid){
  var item=getItemData(iid);
  if(!item)return;
  var types='<option value="book"'+(item.type==='book'?' selected':'')+'>'+t('book')+'</option><option value="video"'+(item.type==='video'?' selected':'')+'>'+t('video')+'</option><option value="practice"'+(item.type==='practice'?' selected':'')+'>'+t('practice')+'</option>';
  document.getElementById('mdl').innerHTML='<div class="mh"></div><h3>'+t('editItem')+'</h3><input class="mi" id="ename" value="'+item.name+'" placeholder="'+t('itemName')+'"><div class="m-row"><select id="etype">'+types+'</select><input class="mi" type="number" id="etotal" value="'+(item.total||0)+'" placeholder="'+t('itemTotal')+'" style="margin:0"></div><button class="mb pr" onclick="svEdit(\''+iid+'\',\''+bid+'\')">'+t('save')+'</button><button class="mb dg" onclick="delItem(\''+iid+'\',\''+bid+'\')">'+t('del')+'</button><button class="mb sc" onclick="closeMdl()">'+t('cancel')+'</button>';
  showMdl();
}
function svEdit(iid,bid){
  var nm=document.getElementById('ename').value.trim();
  var tp=document.getElementById('etype').value;
  var tot=parseInt(document.getElementById('etotal').value)||0;
  if(!nm)return;
  S.editedItems[iid]={id:iid,name:nm,type:tp,total:tot,star:(getItemData(iid)||{}).star};
  sv();closeMdl();rDetail(bid);toast('âœ…');
}
function delItem(iid,bid){
  S.ck[iid]=false;delete S.ip[iid];delete S.subtasks[iid];delete S.editedItems[iid];
  // mark as hidden
  if(!S.hiddenItems)S.hiddenItems={};
  S.hiddenItems[iid]=true;
  sv();closeMdl();rDetail(bid);toast(t('del')+' âœ…');
}

// SUBTASKS
function openAddSub(iid,bid){
  document.getElementById('mdl').innerHTML='<div class="mh"></div><h3>'+t('addSub2')+'</h3><input class="mi" id="snm" placeholder="'+t('addSubtask')+'"><button class="mb pr" onclick="svSub(\''+iid+'\',\''+bid+'\')">'+t('save')+'</button><button class="mb sc" onclick="closeMdl()">'+t('cancel')+'</button>';
  showMdl();
}
function svSub(iid,bid){
  var nm=document.getElementById('snm').value.trim();
  if(!nm)return;
  if(!S.subtasks[iid])S.subtasks[iid]=[];
  S.subtasks[iid].push({nm:nm,dn:false});
  sv();closeMdl();rDetail(bid);toast('âœ…');
}
function tgSub(iid,si,bid){
  if(S.subtasks[iid]&&S.subtasks[iid][si]){
    S.subtasks[iid][si].dn=!S.subtasks[iid][si].dn;
    // Auto-check parent if all subs done
    var allDone=S.subtasks[iid].every(function(s){return s.dn});
    if(allDone&&S.subtasks[iid].length>0)S.ck[iid]=true;
    sv();rDetail(bid);
  }
}
function delSub2(iid,si,bid){
  if(S.subtasks[iid]){S.subtasks[iid].splice(si,1);sv();rDetail(bid)}
}

// Override rDetail to filter hidden items
var _origRDetail=rDetail;
rDetail=function(bid){
  // Temporarily filter hidden
  if(S.hiddenItems){
    DATA.roots.forEach(function(r){r.branches.forEach(function(b){if(b.id===bid){
      b.sections.forEach(function(s){
        s._origItems=s._origItems||s.items;
        s.items=s._origItems.filter(function(it){return!S.hiddenItems[it.id]});
      });
    }})});
  }
  _origRDetail(bid);
};

// ======================== RENDER TIMELINE ========================
function rTimeline(){
  document.getElementById('tl-t').textContent=t('tlTitle');
  var now=new Date();
  var closestFuture=-1;
  DATA.timeline.forEach(function(ev,i){if(new Date(ev.date)>now&&closestFuture<0)closestFuture=i});

  var h='<div class="tl"><div class="tll"></div>';
  DATA.timeline.forEach(function(ev,i){
    var d=new Date(ev.date);
    var status=d<now?'ps':(i===closestFuture?'cr':'fu');
    var lb=S.lang==='ar'?ev.title:ev.titleEn;
    var desc=S.lang==='ar'?ev.desc:ev.descEn;
    var days=dU(ev.date);
    var daysAbs=Math.abs(days);

    h+='<div class="tli"><div class="tld '+status+'"></div><div class="tlc">';
    h+='<div class="tldt">'+fD(ev.date)+'</div>';
    h+='<div class="tltt">'+lb+'</div>';
    if(desc)h+='<div class="tldsc">'+desc+'</div>';
    if(i===closestFuture)h+='<span class="tlb">'+t('youHere')+'</span>';
    if(status==='fu'||status==='cr'){
      h+='<div class="tl-cd">'+t('rem')+' '+daysAbs+' '+t('daysUnit')+'</div>';
    } else {
      h+='<div class="tl-cd" style="color:var(--grn)">âœ… '+(S.lang==='ar'?'ØªÙ…':'Done')+'</div>';
    }
    h+='</div></div>';
  });
  h+='</div>';

  // Add overall progress summary
  var tp=totProg();
  var circ=175.9;
  h+='<div style="text-align:center;padding:20px 0">';
  h+='<div class="cpg" style="width:80px;height:80px;margin:0 auto 10px"><svg viewBox="0 0 64 64" style="width:80px;height:80px"><circle class="bg" cx="32" cy="32" r="28"/><circle class="fg" cx="32" cy="32" r="28" style="stroke:var(--pri);stroke-dasharray:'+circ+';stroke-dashoffset:'+circ*(1-tp/100)+'"/></svg><div class="pct" style="color:var(--pri);font-size:16px">'+tp+'%</div></div>';
  h+='<div style="font-size:14px;font-weight:700">'+t('prog')+' '+(S.lang==='ar'?'Ø§Ù„ÙƒÙ„ÙŠ':'Overall')+'</div>';
  h+='<div style="font-size:12px;color:var(--text2);margin-top:4px">ğŸ”¥ '+S.streak.c+' '+t('streakT')+'</div>';
  h+='</div>';

  document.getElementById('tl-content').innerHTML=h;
}

// ======================== RENDER STATS ========================
function rStats(){
  document.getElementById('stats-t').textContent=t('statsT');
  var tabs=[{id:'ov',l:t('ov')},{id:'gpa',l:t('gpaC')}];
  var th='';tabs.forEach(function(tb){th+='<button class="t '+(S.stab===tb.id?'act':'')+'" onclick="sSTB(\''+tb.id+'\')">'+tb.l+'</button>'});
  document.getElementById('s-tabs').innerHTML=th;
  if(S.stab==='ov')rStatsOv();else rStatsGpa();
}
function sSTB(tb){S.stab=tb;rStats();sv()}

function rStatsOv(){
  var h='<div class="skc"><div class="sk-blob"></div><div class="ski">ğŸ”¥</div><div class="skn">'+S.streak.c+'</div><div class="skl">'+t('streakT')+'</div></div>';

  // Total progress
  var tp=totProg(),circ=175.9;
  h+='<div style="text-align:center;padding:10px 0 16px"><div class="cpg" style="width:70px;height:70px;margin:0 auto 8px"><svg viewBox="0 0 64 64" style="width:70px;height:70px"><circle class="bg" cx="32" cy="32" r="28"/><circle class="fg" cx="32" cy="32" r="28" style="stroke:var(--pri);stroke-dasharray:'+circ+';stroke-dashoffset:'+circ*(1-tp/100)+'"/></svg><div class="pct" style="color:var(--pri);font-size:15px">'+tp+'%</div></div><div style="font-size:14px;font-weight:700">'+t('prog')+' '+(S.lang==='ar'?'Ø§Ù„ÙƒÙ„ÙŠ':'Overall')+'</div></div>';

  DATA.roots.forEach(function(r){
    var cl=gC(r.id),bg=gBg(r.id);
    r.branches.forEach(function(b){
      var p=bProg(b.id),nm=S.lang==='ar'?b.name:b.nameEn;
      h+='<div class="pli"><div class="plii" style="background:'+bg+';color:'+cl+'">'+b.icon+'</div><div class="plin"><div class="plinm">'+nm+'</div><div class="pb"><div class="pfl" style="width:'+p.p+'%;background:'+cl+'"></div></div></div><div class="plip" style="color:'+cl+'">'+p.p+'%</div></div>';
    });
  });
  document.getElementById('s-cnt').innerHTML=h;
}

function rStatsGpa(){
  var h='<div class="gps">';
  if(S.gpaR){
    h+='<div class="gpr"><div class="gp-blob"></div><div class="gpv">'+S.gpaR.grade+'</div><div class="gpg">'+S.gpaR.gradeEn+'</div></div>';
    h+='<div class="gprw"><div class="gpb"><div class="gpbv">'+S.gpaR.gpa4+'</div><div class="gpbl">'+t('gpa4')+'</div></div><div class="gpb"><div class="gpbv">'+S.gpaR.uk+'</div><div class="gpbl">'+t('ukClass')+'</div></div><div class="gpb"><div class="gpbv">'+S.gpaR.avg+'</div><div class="gpbl">'+t('cumGrade')+'</div></div></div>';
    h+='<div class="gadv">'+t('advGpa')+S.gpaR.advice+'</div>';
  }

  S.gpa.sems.forEach(function(sem,si){
    h+='<div class="smc"><h4>'+t('sem')+' '+(si+1)+'<button class="dls" onclick="delSem('+si+')" style="background:none;border:none;color:var(--red);font-size:16px;cursor:pointer">âœ•</button></h4>';
    sem.subs.forEach(function(sub,sbi){
      h+='<div class="sr"><input placeholder="'+t('subName')+'" value="'+sub.n+'" onchange="updSub('+si+','+sbi+',\'n\',this.value)"><select onchange="updSub('+si+','+sbi+',\'g\',this.value)">';
      var grades=['excellent','vgood','good','pass','weak','vweak'];
      grades.forEach(function(g){h+='<option value="'+g+'"'+(sub.g===g?' selected':'')+'>'+t(g)+'</option>'});
      h+='</select><button class="dls" onclick="delSubG('+si+','+sbi+')">âœ•</button></div>';
    });
    h+='<button class="asb" onclick="addSubG('+si+')">'+t('addSub')+'</button></div>';
  });

  h+='<button class="asmb" onclick="addSem()">'+t('addSem')+'</button>';
  h+='<button class="cgb" onclick="calcGpa()">'+t('calcGpa')+'</button>';
  h+='</div>';
  document.getElementById('s-cnt').innerHTML=h;
}

function updSub(si,sbi,k,v){S.gpa.sems[si].subs[sbi][k]=v;sv()}
function addSubG(si){S.gpa.sems[si].subs.push({n:'',g:'excellent'});sv();rStatsGpa()}
function delSubG(si,sbi){S.gpa.sems[si].subs.splice(sbi,1);sv();rStatsGpa()}
function addSem(){S.gpa.sems.push({id:S.gpa.sems.length+1,subs:[{n:'',g:'excellent'}]});sv();rStatsGpa()}
function delSem(si){if(S.gpa.sems.length<=1)return;S.gpa.sems.splice(si,1);sv();rStatsGpa()}

function calcGpa(){
  var pts={excellent:4,vgood:3,good:2,pass:1,weak:0,vweak:0};
  var total=0,count=0;
  S.gpa.sems.forEach(function(sem){sem.subs.forEach(function(sub){total+=pts[sub.g]||0;count++})});
  if(!count){toast('âš ï¸');return}
  var avg=total/count;
  var grade,gradeEn,gpa4,uk,advice;
  if(avg>=3.5){grade='Ù…Ù…ØªØ§Ø²';gradeEn='Excellent';gpa4='4.0';uk='First Class';advice=t('adv1')}
  else if(avg>=2.5){grade='Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹';gradeEn='Very Good';gpa4='3.0';uk='Upper Second (2:1)';advice=t('adv2')}
  else if(avg>=1.5){grade='Ø¬ÙŠØ¯';gradeEn='Good';gpa4='2.5';uk='Lower Second (2:2)';advice=t('adv2')}
  else if(avg>=1){grade='Ù…Ù‚Ø¨ÙˆÙ„';gradeEn='Pass';gpa4='2.0';uk='Third Class';advice=t('adv3')}
  else{grade='Ø¶Ø¹ÙŠÙ';gradeEn='Weak';gpa4='1.0';uk='Fail';advice=t('adv3')}
  S.gpaR={grade:grade,gradeEn:gradeEn,gpa4:gpa4,uk:uk,avg:avg.toFixed(2),advice:advice};
  sv();rStatsGpa();toast('âœ…');
}

// ======================== RENDER SETTINGS ========================
function rSettings(){
  document.getElementById('set-t').textContent=t('settingsT');
  document.getElementById('abt').textContent=t('about');
  document.getElementById('set-list').innerHTML=
    '<div class="sti" onclick="toggleDark()"><div class="sil"><span class="sii">ğŸŒ™</span><span class="sit">'+t('darkM')+'</span></div><div class="tg'+(S.dark?' on':'')+'"><div class="tgk"></div></div></div>'+
    '<div class="sti" onclick="toggleLang()"><div class="sil"><span class="sii">ğŸŒ</span><span class="sit">'+t('langS')+'</span></div><div style="font-size:13px;font-weight:600;color:var(--pri)">'+(S.lang==='ar'?'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©':'English')+'</div></div>'+
    '<div class="sti" onclick="expData()"><div class="sil"><span class="sii">ğŸ“¤</span><span class="sit">'+t('expD')+'</span></div><div style="color:var(--text2)">â€º</div></div>'+
    '<div class="sti" onclick="impData()"><div class="sil"><span class="sii">ğŸ“¥</span><span class="sit">'+t('impD')+'</span></div><div style="color:var(--text2)">â€º</div></div>'+
    '<div class="sti" onclick="delData()"><div class="sil"><span class="sii">ğŸ—‘ï¸</span><span class="sit" style="color:var(--red)">'+t('delAll')+'</span></div><div style="color:var(--red)">â€º</div></div>';
}

function toggleDark(){
  S.dark=!S.dark;
  document.body.classList.toggle('dark',S.dark);
  document.getElementById('dbtn').textContent=S.dark?'â˜€ï¸':'ğŸŒ™';
  sv();if(S.cp==='settings')rSettings();
}

function toggleLang(){
  S.lang=S.lang==='ar'?'en':'ar';
  document.documentElement.lang=S.lang;
  document.documentElement.dir=S.lang==='ar'?'rtl':'ltr';
  document.getElementById('lbtn').textContent=S.lang==='ar'?'EN':'Ø¹Ø±';
  document.querySelectorAll('[data-t]').forEach(function(el){var k=el.dataset.t;if(TR[S.lang][k])el.textContent=TR[S.lang][k]});
  sv();nav(S.cp);
}

function expData(){
  var blob=new Blob([JSON.stringify(S,null,2)],{type:'application/json'});
  var a=document.createElement('a');a.href=URL.createObjectURL(blob);
  a.download='nlp_journey_backup.json';a.click();toast(t('exported'));
}

function impData(){
  var inp=document.createElement('input');inp.type='file';inp.accept='.json';
  inp.onchange=function(e){
    var f=e.target.files[0];if(!f)return;
    var r=new FileReader();r.onload=function(ev){
      try{var d=JSON.parse(ev.target.result);Object.assign(S,d);sv();nav(S.cp);toast(t('imported'))}catch(e){toast('âŒ Error')}
    };r.readAsText(f);
  };inp.click();
}

function delData(){
  document.getElementById('mdl').innerHTML='<div class="mh"></div><h3>ğŸ—‘ï¸ '+t('delAll')+'</h3><p style="font-size:13px;margin-bottom:16px;color:var(--text2)">'+t('delConf')+'</p><button class="mb dg" onclick="confirmDel()">'+t('confirm')+'</button><button class="mb sc" onclick="closeMdl()">'+t('cancel')+'</button>';
  showMdl();
}
function confirmDel(){
  S.ck={};S.ip={};S.tasks=[];S.streak={c:0,ld:null};S.subtasks={};S.editedItems={};S.hiddenItems={};
  S.gpa={sems:[{id:1,subs:[{n:'',g:'excellent'}]}]};S.gpaR=null;S.cdMode={};
  sv();closeMdl();nav('home');toast(t('deleted'));
}

// ======================== INIT ========================
function init(){
  ld();
  if(S.onboarded)document.getElementById('onboard').classList.add('hide');
  if(S.dark){document.body.classList.add('dark');document.getElementById('dbtn').textContent='â˜€ï¸'}
  if(S.lang==='en'){document.documentElement.lang='en';document.documentElement.dir='ltr';document.getElementById('lbtn').textContent='Ø¹Ø±'}
  document.querySelectorAll('[data-t]').forEach(function(el){var k=el.dataset.t;if(TR[S.lang][k])el.textContent=TR[S.lang][k]});

  // Fix exam countdown dates - find next upcoming exam
  var now=new Date();
  var thisYear=now.getFullYear();
  var nextYear=thisYear+1;
  // Sem 1 exams in January, Sem 2 in May
  DATA.countdowns.forEach(function(cd){
    if(cd.id==='exams1'){
      var examDate=new Date(thisYear,0,15); // Jan 15
      if(examDate<now)examDate=new Date(nextYear,0,15);
      cd.date=examDate.toISOString().split('T')[0];
    }
    if(cd.id==='exams2'){
      var examDate2=new Date(thisYear,4,15); // May 15
      if(examDate2<now)examDate2=new Date(nextYear,4,15);
      cd.date=examDate2.toISOString().split('T')[0];
    }
  });

  rHome();
}
init();
</script>
</body>
</html>
